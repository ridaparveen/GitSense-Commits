# Activity Summary for 11/12/2025

## 11:19:23 AM
A new `SelectCustomerPanel` component has been introduced in `src/SelectCustomer.tsx`, last modified on 11/12/2025, 10:06:36 AM. This component provides a comprehensive customer selection interface.

**File-Specific Updates (`src/SelectCustomer.tsx`):**
*   **Core Functionality:** Implements a searchable, paginated dropdown for selecting customers.
*   **State Management:** Utilizes React's `useState` for local UI state (search query, current page, loading status, customer options) and integrates with Redux via `useDispatch` to update a global `setSelectedCustomer` state.
*   **API Integration:** Fetches paginated customer options from `ApiManager.getPaginatedCompanyOptions` with parameters for search, page, items per page, and role (`CUSTOMER`). The search functionality is debounced for performance.
*   **User Interface:**
    *   Displays the currently selected customer (or "Select Customer") along with an avatar.
    *   The dropdown menu includes a header with a "Clear All" button, a search input field (with a magnifying glass icon), a list of customer results, and pagination controls.
    *   Handles loading states and displays "No results found" messages.
*   **Interaction Logic:** Key event handlers (`handleSearchChange`, `handlePageChange`, `handleCustomerChange`, `handleClearAll`) manage user input and state updates.
*   **Dropdown Persistence:** A notable pattern in the component is the extensive use of `e.stopPropagation()` on `onClick`, `onMouseDown`, `onKeyDown`, and `onFocus` events within the `DropdownMenu` and its internal interactive elements (search input, clear button). This pattern is crucial for preventing the dropdown from closing prematurely when users interact with the components inside the menu itself, enhancing usability.
*   **Styling:** The component leverages Tailwind CSS classes for its layout and visual presentation.

## 12:19:29 PM
The code changes log details updates across three React components: `SelectCustomer.tsx`, `components/core/usercard.tsx`, and `components/core/sidebar.tsx`, all occurring on **11/12/2025** between 10:06 AM and 12:19 PM.

### File-Specific Updates:

*   **`c:\Users\ridap\OneDrive\Documents\T360-V2\t360-frontend-v2\src\SelectCustomer.tsx`**
    *   **Initial Commit (10:06:36 AM):** Introduced the `SelectCustomerPanel` component, a comprehensive dropdown for selecting customers. It features:
        *   State management for customer options, search query, current page, total pages, and loading status.
        *   Integration with Redux (`setSelectedCustomer`).
        *   Debounced API calls (`ApiManager.getPaginatedCompanyOptions`) for efficient search.
        *   Pagination functionality using `@mui/material`.
        *   A "Clear All" button to reset selections and search.
        *   Extensive use of `e.stopPropagation()` within the dropdown menu to prevent premature closing when interacting with its internal elements (search input, buttons).
        *   UI styling using Tailwind CSS, incorporating `Dropdown`, `Avatar`, `InputGroup`, and `InputBox` components.
    *   **Minor Styling Tweaks (12:15:47 PM, 12:16:19 PM, 12:16:29 PM):** The `h2` header's CSS class was repeatedly changed between `input-title` and `checkbox-title`, eventually settling on `input-title`.
    *   **Comment Removal (12:17:01 PM):** A non-functional comment `// âœ… allows space typing` was removed from the `InputBox` component.
    *   **Search Input Wrapper Changes (12:18:12 PM, 12:19:03 PM):** The search `InputGroup` was first wrapped in a `div` with styling (`w-60 border cursor-pointer border-border-primary rounded-lg p-1 pl-2 shadow flex gap-2 items-center text-sm justify-between`), then had some of its border and rounded-corner classes removed (`border cursor-pointer border-border-primary rounded-lg`) in the subsequent commit.

*   **`c:\Users\ridap\OneDrive\Documents\T360-V2\t360-frontend-v2\src\components\core\usercard.tsx`**
    *   **Initial Commit (12:11:33 PM):** Created the `UserCard` component, which displays user information and provides a logout mechanism. Key aspects include:
        *   `getInitials` helper function to generate avatar initials.
        *   Fetches user preferences and retrieves user data from `localStorage`.
        *   `handleLogout` function: Clears user `token` and `user` from `localStorage`, dispatches a Redux `auth/logout` action, and redirects to a specific URL based on whether the `authtype` is "auth0" or a standard application logout. Notably, the active logout logic was refined from a previously commented-out block to ensure local storage clearing and Redux dispatch happen *before* redirection for Auth0.
        *   Renders user avatar, name, and role within a `Dropdown` menu, with a "Sign out" `DropdownItem`.
        *   A minor typo (`{user?.role}ll`) was present in the displayed role.
    *   **Typo Correction (12:14:55 PM):** The typo in the user's role display was fixed from `{user?.role}ll` to `{user?.role}`.

*   **`c:\Users\ridap\OneDrive\Documents\T360-V2\t360-frontend-v2\src\components\core\sidebar.tsx`**
    *   **Initial Commit (12:13:31 PM):** Implemented the `SideBar` component, forming the main navigation structure of the application.
        *   Renders a logo and application title.
        *   Conditionally renders the `SelectCustomerPanel` (from `src/SelectCustomer.tsx`) only if the logged-in user's role is "ADMIN_V2". It uses the `selectedCustomer` from Redux as its initial value and updates Redux on selection.
        *   Dynamically generates navigation items based on a `sidebarMenu` configuration, applying active styling based on the current `pathname`.
        *   Integrates the `UserCard` component in its footer.

### Patterns and Recurring Elements:

*   **Frontend Technologies:** Consistent use of React functional components and hooks (`useState`, `useEffect`, `useCallback`), Redux for state management, and Tailwind CSS for styling across all modified files.
*   **UI Component Library:** Reliance on custom `@components/kit` (e.g., `Dropdown`, `Avatar`, `InputGroup`, `Sidebar`, `SidebarItem`) and `@mui/material` components for building the user interface.
*   **User Context and Data:** Both `UserCard` and `SideBar` access user information (role, name) from `localStorage` to determine UI elements and permissions.
*   **Global State Management:** `useDispatch` and `useSelector` from `react-redux` are frequently used to interact with a global state slice for user preferences and customer selection.
*   **Timestamp Proximity:** All changes occurred within a relatively short period (approximately 2 hours on the same day), suggesting a focused development session, possibly for implementing or refining user and customer selection features and related UI components.
*   **Styling Iteration:** The `SelectCustomer.tsx` file shows multiple rapid updates to CSS classes and structural `div` wrappers, indicating iterative refinement of component styling.