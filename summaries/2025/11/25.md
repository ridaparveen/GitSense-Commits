# Activity Summary for 11/25/2025

## 6:41:03 AM
The code changes primarily revolve around the `t360-frontend` application, showing a significant expansion of features related to booking, shipping, and analytics, along with enhancements in form management and user experience.

### File-Specific Updates:

*   **`c:\Users\ridap\OneDrive\Documents\T360_Api\t360-frontend\src\App.js`**
    *   **11/21/2025, 11:31:13 AM:** This file underwent a major update, introducing a vast number of new imports for various screens and components. This indicates a substantial addition of new functionalities across the application, including:
        *   New domain-specific screens: `OtmBolScreen`, `CustomerScreen`, `PartyScreen`, `AgentScreen`, `BookingPlanBoardScreen`, `SPRPlanBoardScreen`, `LineWiseScreen`, `CIScreen`, `ISFEntryFormScreen`, `AlcScreen`, `ShippingOrdersScreen`, `ContainerReportScreen`, `PdfParserScreen`, `FCLScreen`, `LCLScreen`, `RailScreen`, `AirTrackingScreen`, `ShipmentTrackingScreen`, `Dashboard7501Screen`, `ShipmentsScreen`, `CngBookingScreen`, `CityMaster`, `PortmasterScreen`.
        *   New extended form and dashboard components: `AgentBookingFormScreenExtend`, `AgentPoFormExtend`, `BookingDashbaordScreenExtend`, `CngBookingFormScreen`, `CngBookingScreenExtend`.
        *   New administrative and reporting screens: `ReportSchedulerScreen`, `NewReportScreen`, `EditReportScreen`, `AlcExceptionDashboard`, `BackOfficeAdminTerminal`.
    *   The routing configuration was heavily expanded to incorporate these new screens, all protected by `ProtectedRoute` based on `UserRoleEnum` (e.g., ADMIN, CUSTOMER, AGENT, CSF, FRONTOFFICE, BACKOFFICE, SPR_CUSTOMER, ADMIN_V2).
    *   Routes for House Bill of Lading (HBL) forms (`booking/hbl_form`) were explicitly added.
    *   A development console log "TEST on Flow" was present.
    *   **11/21/2025, 11:34:00 AM:** A minor permission adjustment was made for the `shipment_tracking` route, removing `UserRoleEnum.ADMIN_V2` from the allowed roles.

*   **`c:\Users\ridap\OneDrive\Documents\T360_Api\t360-frontend\src\components\screen\analytics\MetricsBox.jsx`**
    *   **11/21/2025, 11:36:28 AM:** This file was introduced or significantly updated to define the `MetricsBox` component for rendering analytics charts. It includes:
        *   Dynamic chart rendering (Bar, Pie, Line, Stacked Bar, Gauge) based on `chartType` and `chartView`.
        *   Integration with Redux (`useSelector`) for state management.
        *   Components for toolbar (`MetricToolbar`), footer (`MetricFooter`), and a modal for full-screen viewing (`ThemedModal`).
        *   A `NoDataAvailable` placeholder.

*   **`c:\Users\ridap\OneDrive\Documents\T360_Api\t360-frontend\src\components\screen\booking\actions.js`**
    *   **11/24/2025, 2:52:57 PM:** The `getBookingActions` function was refactored. Instead of a single large conditional return, it now defines several reusable arrays of actions (`bookingActions`, `isfActions`, `hblAction`, `createHblAction`, `viewAction`, `updateLineBookingAction`, `updateDOAction`) and combines them based on user access roles. New actions to "Update Line Booking" and "Update DO" were added, which open modals.
    *   **11/24/2025, 2:53:07 PM:** The `formAction` for the `Create HBL` action was corrected from `"edit"` to `"add"`, aligning with its intended "create" functionality.
    *   **11/24/2025, 2:53:44 PM - 11/24/2025, 2:56:17 PM:** A temporary, likely debugging, change was made where the "Edit HBL" label was briefly altered to "Edit HBL123" and then reverted back.
    *   **11/24/2025, 3:43:34 PM:** The icon for the "Create HBL" action was updated from `<Edit />` to the more appropriate `<Create />` icon, enhancing clarity.
    *   **11/24/2025, 3:43:58 PM:** No functional changes observed.

*   **`c:\Users\ridap\OneDrive\Documents\T360_Api\t360-frontend\src\store\api\agentBookingApi.js`**
    *   **11/24/2025, 3:02:03 PM:** This Redux Toolkit Query API file was extended with new `tagTypes` (`'FormDetails'`) and several new endpoints:
        *   `saveHblBooking` (mutation) to save House Bill of Lading details.
        *   `fetchHblBookingFormDetails` (query) to retrieve HBL form data.
        *   `updateCarrierBooking` (mutation) for carrier booking updates.
        *   `updateDo` (mutation) for Delivery Order updates, notably removing the `Content-Type` header for its request.
        *   `exportSprReport` (query) for SPR booking reports.
    *   Existing `saveBooking` and `fetchBookingFormDetails` endpoints were updated to invalidate/provide the new `'FormDetails'` tag.

*   **`c:\Users\ridap\OneDrive\Documents\T360_Api\t360-frontend\src\components\screen\booking\hbl\HBLform.jsx`**
    *   **11/24/2025, 3:14:32 PM:** This file was introduced to create the `HBLForm` component, a complex form for managing House Bill of Lading entries. Key aspects include:
        *   Extensive form handling using `Formik` and `Yup` for validation, with specific HBL-related validation schema (`HBLvalidationSchema`).
        *   Integration with Redux (`useDispatch`, `useSelector`) to manage form state, routing, container, and PO lists.
        *   Dynamic party management features (edit, view, add new party) and state updates when changing party tabs.
        *   Keyboard shortcuts (`ctrl+u`, `ctrl+d`, `ctrl+a`, `ctrl+s`, `ctrl+p`) for improved user interaction.
        *   Error handling with `toast` notifications and an `AlertConfig` for displaying messages.
        *   **11/24/2025, 3:17:08 PM:** A minor refinement was made to the `agent_booking_id` initialization within `Formik`, simplifying the conditional logic for handling "copy" actions.
        *   Other timestamps between 3:15 PM and 3:17 PM indicate minor saves without functional changes.

*   **`c:\Users\ridap\OneDrive\Documents\T360_Api\t360-frontend\src\components\screen\booking\hbl\validation.js`**
    *   **11/24/2025, 3:20:42 PM:** This new file was added to define the `HBLvalidationSchema` using `Yup`.
        *   It includes a `generateAddressValidation` function to create reusable validation schemas for address fields (e.g., `ship_add1`, `cnee_city`, `notify_country`) with specific format and length constraints.
        *   It defines comprehensive validation for core HBL fields such as `pol`, `pod`, `por`, `fpd`, `vessel`, `voyage`, `bookingdate`, `hbldate`, `client_name`, `cnee_name`, `ship_name`, and `blno` (which is now required).
        *   Custom validation tests are included for `mblno` and `blno` to enforce a specific alphanumeric format.
        *   Dynamic inclusion of address validations for `shipper`, `consignee`, and `notify` parties.

### Patterns and Recurring Elements:

*   **Feature-rich Expansion:** The log demonstrates a clear pattern of adding extensive new features and modules to the frontend, particularly in the areas of shipping, booking, analytics, and master data management.
*   **Role-Based Access Control:** The `App.js` file heavily utilizes `ProtectedRoute` and `UserRoleEnum` to enforce role-specific access to different parts of the application, suggesting a robust security and permissions model.
*   **Modular Architecture:** The codebase is being structured with a focus on modularity, evident from the refactoring of booking actions, the use of Redux Toolkit Query for API interactions, and dedicated validation schemas for complex forms.
*   **Form Management Consistency:** `Formik` and `Yup` are consistently used for form state management and validation across new complex forms like HBL, ensuring a standardized approach to data input and integrity.
*   **User Experience Enhancements:** Implementation of keyboard shortcuts for common form actions indicates an effort to improve the efficiency and usability for power users.
*   **Continuous Development & Refinement:** The presence of console logs, temporary label changes, and repeated save operations in the timestamps suggest an active and iterative development process.
*   **Focus on Shipping/Logistics:** A significant portion of the changes are concentrated on core logistics functionalities like packing lists, service invoices, expense codes, destinations, vendors, PO/DSO orders, OTM BOLs, HBLs, ISFs, and various tracking screens (FCL, LCL, Rail, Air, Shipment).