# Activity Summary for 8/12/2025

## 9:28:20 AM
The log shows updates to two files within the `t360-backend-v2` project on August 11th, 2025.

`dashboardService.ts` (6:57:56 PM): This file contains two API endpoints: `getDashboardCardInfo` and `getDeliveryData`.  `getDashboardCardInfo` retrieves dashboard card information using a complex SQL query that counts shipments based on several conditions (pending departure, in transit, ETA within a week, out for delivery).  These conditions heavily utilize the `mtr_tracking_data` table and columns like `vessel_actualdeparted_date`, `t49_vessel_actualdeparted_date`, `t49_eta`, etc., and filter based on the user's role and a provided date range. `getDeliveryData` fetches delivery and vessel arrival data, again using distinct SQL queries based on the request type ('delivery' or 'vessel'). Both functions use the `query` function from the common utility library to interact with the database and return results as JSON responses.

`shipmentService.ts` (6:58:36 PM): This file contains the `getAll` endpoint, which retrieves all shipments with extensive filtering and pagination capabilities.  The endpoint uses a custom `SqlQueryBuilder` class to construct dynamic SQL queries based on various filter parameters (POL, POD, shipment ID, status, dates, etc.).  A significant portion of the code iterates through the results to enrich each shipment with status information derived from the `mtr_tracking_data` table and its various date fields.  The logic for determining the shipment status (Pending, Loading, Departed, In Transit, Custom Hold, Arrived, Delivered) is complex and relies on multiple date comparisons and conditions from the MTR data.  The `SqlQueryBuilder` class builds conditions based on user roles (Admin, Customer, FrontOffice, Agent), applying appropriate access restrictions to the data.  The code also incorporates error handling and logging using `logger` and `HttpStatusCodes`.


## 1:28:21 PM
The log shows several code changes related to data grids and pagination components in a React application.  The primary focus is on styling and functionality improvements to data grids and the creation of a custom pagination component.

**`datagrid.tsx` (8/11/2025, 6:48:19 PM & 8/11/2025, 6:49:30 PM):** This file contains the main data grid component (`AppGrid`).  The two commits show minor differences, the second commit adds `onPageSizeChange` to the `declare module` and  `FooterPropsOverrides` interface. The component uses `@mui/x-data-grid` and `@mui/x-data-grid-pro` for data grid rendering, and applies custom styling using styled-components and Tailwind CSS.  Significant changes involve enhancing pagination functionality and integrating a custom pagination component (`CustomNewPagination`).  The data grid supports sorting, pagination, and custom row IDs.

**`pagination.tsx` (8/11/2025, 6:52:36 PM & 8/11/2025, 6:52:42 PM):** This file defines two pagination components: `CustomPagination` and `CustomNewPagination`. The first is a simpler version, while the second is more advanced, using a component library (`@components/kit/pagination`) for improved rendering and features like page size selection.  The two commits show the two components being created at nearly the same time.  The `CustomNewPagination` component provides better visual presentation and more robust pagination logic, handling cases like "gaps" in page numbers for better user experience.

**`booking-dashboard.tsx` (8/11/2025, 6:53:12 PM):** This file implements a booking dashboard. It fetches data using `useFetchBookingDashboardDataQuery`, displays booking counts categorized by status (new, pending, completed, cancelled), and uses `AppGrid` to render a booking list with filtering and sorting capabilities.   The component uses Redux for state management and React Router for navigation.

**`shipment-coulmns.tsx` (8/11/2025, 6:53:35 PM):** This file defines several reusable functions to generate column definitions for data grids related to shipments.  `useShipmentCoulmns`, `useShipmentContainersCoulmns`, and `useOverviewDashboardColumns` create different column configurations for various views. They utilize custom components for rendering cells (like progress bars for status) and include actions like tracking shipment details.

**`shipment-container-page.tsx` (8/11/2025, 6:54:56 PM):**  This file shows a page displaying shipment container data.  It leverages `AppGrid`, `FilterSidebar`, and custom hooks from `shipment-coulmns.tsx` for data display and filtering. It uses Redux and custom reducers to handle state and options fetching, with an emphasis on filtering and pagination.  The component also includes autocompletion for fields like POL and POD.

In summary, the changes reflect a concerted effort to improve the data presentation and user interaction within the application.  The development involved creating reusable components for data grids and pagination, integrating these with Redux for state management, and using external libraries for styling and UI elements.  The emphasis on custom components and styling points to a desire for consistent UI throughout the application.  The use of React Router enables navigation between different views.
