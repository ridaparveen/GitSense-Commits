# Activity Summary for 12/29/2025

## 2:19:28 PM
The provided log details changes to a single file: `c:\Users\ridap\OneDrive\Documents\T360-V2\t360-frontend-v2\src\utils\utils.ts`.

**File-Specific Updates & Timestamps:**
All entries for `src\utils\utils.ts` between `12/28/2025, 2:04:24 PM` and `12/29/2025, 2:17:20 PM` show **no actual code changes**. The content of the file remains identical across all logged timestamps. This indicates frequent saves or logging events where no modifications were introduced to the code itself.

**Content Overview (as present in all entries):**
The `utils.ts` file is a collection of utility functions primarily focused on date manipulation and string processing for a frontend application. Key functionalities include:

*   **`appDateFormat`**: A function to format dates into either `MM/DD/YYYY` (display) or `YYYY-MM-DD` (input) format. It handles invalid date inputs gracefully.
*   **`parseRawString`**: A utility to clean a raw string by removing outer curly braces, backslashes, quotes, and newlines, then splitting it into an array of trimmed strings based on commas or spaces.
*   **`useDateFormate`**: A React hook that leverages `moment.js` and `useFetchUserPreferenceQuery` (likely from Redux Toolkit Query) to dynamically format dates based on a user's stored `date_format` preference, defaulting to `MM/DD/YYYY`.
*   **`dateFilterHandle`**: A function that takes a filter string (e.g., "all", "today", "this_week", "last_month", "custom") and calculates appropriate `fromDate` and `toDate` values using the `appDateFormat` utility.
*   **`showLessText`**: A basic string utility to truncate text to a specified maximum length and append "..." if the text exceeds that length.

**Patterns or Recurring Elements:**
The most prominent pattern is the **absence of code changes** across numerous log entries for the same file. The timestamps show a flurry of activity (or logging events) over two days, but the underlying code in `utils.ts` remains stable. The content itself reveals a consistent focus on providing reusable helper functions, especially for date handling (`moment.js` dependency) and string cleaning, indicating a common utilities module in the frontend codebase.

## 3:19:40 PM
The provided log details changes across two files within a frontend application: `src\utils\utils.ts` and `src\pages\shipment\tracking-stepper.tsx`.

**File: `c:\Users\ridap\OneDrive\Documents\T360-V2\t360-frontend-v2\src\utils\utils.ts`**

This file, which contains general utility functions for the frontend, shows no discernible code changes across the provided timestamps (from 12/29/2025, 12:58:05 PM to 12/29/2025, 2:14:40 PM). The content remained identical in every recorded state. It defines several key utilities:
*   `appDateFormat`: A function to format dates into either "MM/DD/YYYY" (display) or "YYYY-MM-DD" (input) formats.
*   `parseRawString`: A function to clean and parse raw strings by removing braces, backslashes, quotes, and newlines, then splitting them into an array of trimmed strings.
*   `useDateFormate`: A React hook that fetches user date preferences using `useFetchUserPreferenceQuery` and provides a `formatDate` function, leveraging `moment.js` for flexible date formatting based on user settings or a "MM/DD/YYYY" fallback.
*   `dateFilterHandle`: A utility to determine `fromDate` and `toDate` ranges based on predefined filters like "all", "today", "this_week", "last_month", "last_6_months", "last_1_Year", "year_2_date", or "custom".
*   `showLessText`: A utility to truncate a given text string to a specified `maxLength` and append "..." if it exceeds the limit.

**File: `c:\Users\ridap\OneDrive\Documents\T360-V2\t360-frontend-v2\src\pages\shipment\tracking-stepper.tsx`**

This file, responsible for a shipment tracking stepper UI component, underwent significant and iterative changes, primarily focused on icon sizing, logic for determining step completion, and the dynamic generation of the tracking timeline.

**Timestamped Updates:**
*   **12/29/2025, 2:22:24 PM (Initial State):** The component was functional, displaying a tracking timeline with location pins, terminal icons, and a ship icon. It included logic for `getFinalInlandDates`, `polToPodcompletedValidation`, `getTravelProgress` (later commented out), and `getTrackingDetails` which structured the timeline based on `shipmentProgress.scope`. Icons generally had larger sizes (e.g., `FaAnchor` size 24, `Icon` width/height 18). Spacer box widths in the icon row were set to `123px`.
*   **12/29/2025, 2:24:43 PM - 2:25:03 PM:** A series of minor visual adjustments were made. The size of all tracking-related icons (`LocationPinIcon`, `TerminalIcon`, `ShipIcon`, `TruckSVGIcon`, `Railway`) was reduced to `14` (from 24 or 18).
*   **12/29/2025, 2:30:19 PM:** Significant functional refactoring occurred:
    *   The `getTravelProgress` function was entirely commented out.
    *   The `polToPodcompletedValidation` function signature and internal logic were updated to explicitly accept `trackingInfo` as an argument.
    *   The `getTrackingDetails` function saw a complete rewrite of its "PORT → DOOR" logic, introducing detailed conditional handling for scenarios with and without rail movement, incorporating `TrainSVGIcon` and `icon_text` properties.
    *   An import for `TrainSVGIcon` was added.
    *   The `width` of the spacer `Box` elements in `s.iconRow` was drastically reduced from `123px` to `24px`.
*   **12/29/2025, 3:01:38 PM:** Further refinement and structural changes:
    *   `polToPodcompletedValidation` was simplified for clarity, explicitly passing `trackingInfo`.
    *   `getTrackingDetails` was refactored into a `const` function within the `TrackingStepper` component.
    *   Icon definitions (`ShipIcon`, `TruckSVGIcon`, `Railway`) were moved to the top-level helpers section.
    *   The subtitle for the POD/Terminal step was updated to conditionally display ATA, e.g., `ETA: date - ATA: date` or just `ETA: date`.
    *   The logic for "PORT → DOOR" was again substantially re-written, introducing explicit boolean flags (`path1`, `path2`, `path3`, `isRailOntheWay`, `isTruckOntheWay`) to manage completion states and icon rendering for different transport legs (rail, truck).
    *   The width of the spacer `Box` elements in `s.iconRow` was adjusted again, this time from `24px` to `60px`.
*   **12/29/2025, 3:10:53 PM:** Minor adjustment within the "PORT → RAIL" scope handling to simplify percentage calculation.
*   **12/29/2025, 3:14:00 PM - 3:16:47 PM:** The logic for determining the "PORT → DOOR" timeline steps was simplified and restructured again. Instead of detailed `path` flags and `inland_rail_move` checks, it began to rely more directly on `shipmentProgress.scope`, `hasTruck`, and `hasRail` flags to decide which final leg (truck) to display. The icon assignment for the final door step was also simplified to consistently use `TruckSVGIcon` if the delivery date is not yet available.
*   **12/29/2025, 3:17:44 PM (Final State):** The import statement `import type { overflow } from "html2canvas-pro/dist/types/css/property-descriptors/overflow";` was removed, indicating cleanup of an unused import. No functional changes to the stepper logic itself were observed since the prior minute's updates.

**Patterns and Recurring Elements:**
*   **Iconography and Sizing:** There was a consistent effort to standardize and manage the visual size and color of various transport and location icons within the stepper.
*   **Conditional Logic Refinement:** The primary area of ongoing change was the `getTrackingDetails` function, which saw multiple rewrites and simplifications to accurately represent different shipment scopes ("Port-Port", "Port-Rail-Door", "Port-Rail", "Port-Door") and their respective completion statuses and vehicle icons. This demonstrates an iterative process to make the tracking logic robust and visually intuitive.
*   **Date Formatting Consistency:** Reliance on the `appDateFormat` utility from `utils.ts` and `moment.js` for consistent date display is evident throughout the component.
*   **UI Layout Adjustments:** Repeated changes to the `width` of spacer `Box` elements in the `iconRow` indicate fine-tuning of the visual layout and spacing of the stepper.

## 4:19:37 PM
The changes log primarily details development on two files: `c:\Users\ridap\OneDrive\Documents\T360-V2\t360-frontend-v2\src\utils\utils.ts` and `c:\Users\ridap\OneDrive\Documents\T360-V2\t360-frontend-v2\src\pages\shipment\tracking-stepper.tsx`.

### File-Specific Updates:

**1. `c:\Users\ridap\OneDrive\Documents\T360-V2\t360-frontend-v2\src\utils\utils.ts`**
*   **Timestamp of activity:** 12/29/2025, between 2:04:58 PM and 2:20:12 PM.
*   **Summary:** This file contains a collection of utility functions for date formatting and string manipulation. `appDateFormat` handles date string conversion to "MM/DD/YYYY" or "YYYY-MM-DD", `parseRawString` cleans and splits raw strings, `useDateFormate` provides dynamic date formatting based on user preferences fetched via `useFetchUserPreferenceQuery`, `dateFilterHandle` calculates date ranges for various filters (e.g., "today", "this_week", "last_6_months", "custom"), and `showLessText` truncates strings.
*   **Key Changes:** Across all listed entries for this file, the content remains identical. This suggests either a series of saves without code modifications or a logging artifact capturing the same stable state multiple times within this period. The presence of a `console.log("data====pppp",data)` in `useDateFormate` hints at debugging during this period.

**2. `c:\Users\ridap\OneDrive\Documents\T360-V2\t360-frontend-v2\src\pages\shipment\tracking-stepper.tsx`**
*   **Timestamp of significant changes:** 12/29/2025, between 2:22:24 PM and 4:17:42 PM.
*   **Summary:** This React component (`TrackingStepper`) is responsible for visualizing a shipment's progress through various stages (Port of Loading (POL), Port of Discharge (POD), Rail Destination, Consignee Location/Door). It dynamically renders icons (ship, anchor, railway, truck) and progress lines based on `trackingInfo` props.
*   **Key Changes and Evolution:**
    *   **Initial Structure (around 2:22:24 PM):** The component was set up with helper functions for date formatting (`formatDate`), custom SVG icons for locations and terminals (`LocationPinIcon`, `TerminalIcon`), and a core `getTrackingDetails` function to build a timeline array. It included a `getTravelProgress` function (later removed/commented) and a `validateTimelineCompletion` function. Icon sizes were initially larger (e.g., 24px for `LocationPinIcon`).
    *   **Icon Size Adjustments (around 2:24:43 PM - 2:25:03 PM):** Icons like `TerminalIcon`, `ShipIcon`, `TruckSVGIcon`, `Railway` (now `MdDirectionsRailway`), and `LocationPinIcon` had their display sizes reduced from 24px/18px to a consistent 14px.
    *   **Typo Correction (around 2:30:19 PM):** A minor typo "Inland ETA123:" was corrected to "Inland ETA:" in the rail destination subtitle.
    *   **Refactoring & Logic Changes (around 2:35:08 PM - 3:04:52 PM):**
        *   The `getTravelProgress` function was entirely removed/commented out, indicating a shift away from dynamic, time-based progress calculation on the frontend.
        *   The `getTrackingDetails` function underwent substantial iterative restructuring. It moved from a complex conditional logic using `hasRail`, `hasTruck`, and `path1/path2/path3` flags, attempting to define completion states and percentages for different shipment scopes (Port-Port, Port-Rail, Port-Door).
        *   `TrainSVGIcon` was temporarily imported and then removed/re-added.
        *   The logic for determining `isDoorCompleted` and associated `percentage` values was frequently tweaked and refined. A `console.log("isDoorCompleted :: ", isDoorCompleted)` was introduced for debugging.
    *   **Major Re-architecture & Type Safety (around 3:07:17 PM - 4:00:39 PM):**
        *   The `getTrackingDetails` function was moved inside the `TrackingStepper` component, becoming a local utility.
        *   The `polToPodcompletedValidation` function was simplified and refined, including a new date comparison logic (`new Date(eta).getTime() < Date.now()`).
        *   The overall structure of `getTrackingDetails` was simplified, using early returns for different `scope` types (Port-Port, Port-Rail/Port-Rail-Door, Port-Door).
        *   Crucially, TypeScript interfaces (`ShipmentProgress`, `TrackingInfo`, `TimelineItem`, `TrackingStepperProps`) were introduced, significantly improving code readability, maintainability, and type safety for the component's props and internal data structures.
        *   Nullish coalescing operator (`??`) was adopted for providing default string values (e.g., `info.pol ?? ""`).
        *   The `normalizeTimelineProgress` function was briefly added to standardize progress percentages but was later removed as the `getTrackingDetails` logic integrated completion handling more directly.
        *   Styling adjustments were made to ensure consistent icon sizing and layout, including `overflowX: "hidden"` for the wrapper to prevent horizontal scrolling.
    *   **Continued Refinements in Completion Logic (around 4:05:06 PM - 4:17:42 PM):**
        *   Further adjustments were made to the `percentage` calculation logic for various timeline steps (especially POD and final delivery), with values often toggling between `50` and `100` based on `completed` status and preceding steps.
        *   The `polToPodcompletedValidation` function was modified to use `info.eta || finalETA` and `info.ata || finalATA` for determining POD completion, making it more flexible.
        *   The `isEtaAtaAvailable` check in POL was broadened to consider both `eta/ata` and `inland_eta/rail_ata`.

### Patterns and Recurring Elements:

*   **Iterative Development:** The `tracking-stepper.tsx` file shows a clear pattern of iterative development, with frequent commits/saves that refine logic, adjust UI elements (like icon sizes and spacing), and enhance code structure (e.g., introducing TypeScript).
*   **Date and Time Handling Focus:** Both files heavily deal with date and time formatting and calculations, indicating a core feature related to tracking and scheduling. The `utils.ts` file provides foundational date helpers, while `tracking-stepper.tsx` consumes these helpers to display dates and determine completion status on a timeline.
*   **Debugging Artifacts:** The presence of `console.log` statements (e.g., "data====pppp" and "isDoorCompleted :: ") suggests active debugging during the development cycle.
*   **UI/UX Refinements:** Minor adjustments to icon sizes and styling properties (`right`, `transform` in `vehicleBox`) point to ongoing visual and layout refinements for the tracking stepper component.
*   **Progress Calculation Complexity:** The logic for calculating completion percentages and assigning icons along the tracking timeline is complex and underwent multiple revisions, reflecting the challenge of accurately representing diverse shipment progress scenarios.
*   **Adoption of Modern JavaScript/TypeScript Features:** The use of nullish coalescing operator `??` and TypeScript interfaces indicates a move towards more robust and maintainable code.