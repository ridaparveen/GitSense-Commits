# Activity Summary for 12/29/2025

## 2:19:28 PM
The provided log details changes to a single file: `c:\Users\ridap\OneDrive\Documents\T360-V2\t360-frontend-v2\src\utils\utils.ts`.

**File-Specific Updates & Timestamps:**
All entries for `src\utils\utils.ts` between `12/28/2025, 2:04:24 PM` and `12/29/2025, 2:17:20 PM` show **no actual code changes**. The content of the file remains identical across all logged timestamps. This indicates frequent saves or logging events where no modifications were introduced to the code itself.

**Content Overview (as present in all entries):**
The `utils.ts` file is a collection of utility functions primarily focused on date manipulation and string processing for a frontend application. Key functionalities include:

*   **`appDateFormat`**: A function to format dates into either `MM/DD/YYYY` (display) or `YYYY-MM-DD` (input) format. It handles invalid date inputs gracefully.
*   **`parseRawString`**: A utility to clean a raw string by removing outer curly braces, backslashes, quotes, and newlines, then splitting it into an array of trimmed strings based on commas or spaces.
*   **`useDateFormate`**: A React hook that leverages `moment.js` and `useFetchUserPreferenceQuery` (likely from Redux Toolkit Query) to dynamically format dates based on a user's stored `date_format` preference, defaulting to `MM/DD/YYYY`.
*   **`dateFilterHandle`**: A function that takes a filter string (e.g., "all", "today", "this_week", "last_month", "custom") and calculates appropriate `fromDate` and `toDate` values using the `appDateFormat` utility.
*   **`showLessText`**: A basic string utility to truncate text to a specified maximum length and append "..." if the text exceeds that length.

**Patterns or Recurring Elements:**
The most prominent pattern is the **absence of code changes** across numerous log entries for the same file. The timestamps show a flurry of activity (or logging events) over two days, but the underlying code in `utils.ts` remains stable. The content itself reveals a consistent focus on providing reusable helper functions, especially for date handling (`moment.js` dependency) and string cleaning, indicating a common utilities module in the frontend codebase.

## 3:19:40 PM
The provided log details changes across two files within a frontend application: `src\utils\utils.ts` and `src\pages\shipment\tracking-stepper.tsx`.

**File: `c:\Users\ridap\OneDrive\Documents\T360-V2\t360-frontend-v2\src\utils\utils.ts`**

This file, which contains general utility functions for the frontend, shows no discernible code changes across the provided timestamps (from 12/29/2025, 12:58:05 PM to 12/29/2025, 2:14:40 PM). The content remained identical in every recorded state. It defines several key utilities:
*   `appDateFormat`: A function to format dates into either "MM/DD/YYYY" (display) or "YYYY-MM-DD" (input) formats.
*   `parseRawString`: A function to clean and parse raw strings by removing braces, backslashes, quotes, and newlines, then splitting them into an array of trimmed strings.
*   `useDateFormate`: A React hook that fetches user date preferences using `useFetchUserPreferenceQuery` and provides a `formatDate` function, leveraging `moment.js` for flexible date formatting based on user settings or a "MM/DD/YYYY" fallback.
*   `dateFilterHandle`: A utility to determine `fromDate` and `toDate` ranges based on predefined filters like "all", "today", "this_week", "last_month", "last_6_months", "last_1_Year", "year_2_date", or "custom".
*   `showLessText`: A utility to truncate a given text string to a specified `maxLength` and append "..." if it exceeds the limit.

**File: `c:\Users\ridap\OneDrive\Documents\T360-V2\t360-frontend-v2\src\pages\shipment\tracking-stepper.tsx`**

This file, responsible for a shipment tracking stepper UI component, underwent significant and iterative changes, primarily focused on icon sizing, logic for determining step completion, and the dynamic generation of the tracking timeline.

**Timestamped Updates:**
*   **12/29/2025, 2:22:24 PM (Initial State):** The component was functional, displaying a tracking timeline with location pins, terminal icons, and a ship icon. It included logic for `getFinalInlandDates`, `polToPodcompletedValidation`, `getTravelProgress` (later commented out), and `getTrackingDetails` which structured the timeline based on `shipmentProgress.scope`. Icons generally had larger sizes (e.g., `FaAnchor` size 24, `Icon` width/height 18). Spacer box widths in the icon row were set to `123px`.
*   **12/29/2025, 2:24:43 PM - 2:25:03 PM:** A series of minor visual adjustments were made. The size of all tracking-related icons (`LocationPinIcon`, `TerminalIcon`, `ShipIcon`, `TruckSVGIcon`, `Railway`) was reduced to `14` (from 24 or 18).
*   **12/29/2025, 2:30:19 PM:** Significant functional refactoring occurred:
    *   The `getTravelProgress` function was entirely commented out.
    *   The `polToPodcompletedValidation` function signature and internal logic were updated to explicitly accept `trackingInfo` as an argument.
    *   The `getTrackingDetails` function saw a complete rewrite of its "PORT → DOOR" logic, introducing detailed conditional handling for scenarios with and without rail movement, incorporating `TrainSVGIcon` and `icon_text` properties.
    *   An import for `TrainSVGIcon` was added.
    *   The `width` of the spacer `Box` elements in `s.iconRow` was drastically reduced from `123px` to `24px`.
*   **12/29/2025, 3:01:38 PM:** Further refinement and structural changes:
    *   `polToPodcompletedValidation` was simplified for clarity, explicitly passing `trackingInfo`.
    *   `getTrackingDetails` was refactored into a `const` function within the `TrackingStepper` component.
    *   Icon definitions (`ShipIcon`, `TruckSVGIcon`, `Railway`) were moved to the top-level helpers section.
    *   The subtitle for the POD/Terminal step was updated to conditionally display ATA, e.g., `ETA: date - ATA: date` or just `ETA: date`.
    *   The logic for "PORT → DOOR" was again substantially re-written, introducing explicit boolean flags (`path1`, `path2`, `path3`, `isRailOntheWay`, `isTruckOntheWay`) to manage completion states and icon rendering for different transport legs (rail, truck).
    *   The width of the spacer `Box` elements in `s.iconRow` was adjusted again, this time from `24px` to `60px`.
*   **12/29/2025, 3:10:53 PM:** Minor adjustment within the "PORT → RAIL" scope handling to simplify percentage calculation.
*   **12/29/2025, 3:14:00 PM - 3:16:47 PM:** The logic for determining the "PORT → DOOR" timeline steps was simplified and restructured again. Instead of detailed `path` flags and `inland_rail_move` checks, it began to rely more directly on `shipmentProgress.scope`, `hasTruck`, and `hasRail` flags to decide which final leg (truck) to display. The icon assignment for the final door step was also simplified to consistently use `TruckSVGIcon` if the delivery date is not yet available.
*   **12/29/2025, 3:17:44 PM (Final State):** The import statement `import type { overflow } from "html2canvas-pro/dist/types/css/property-descriptors/overflow";` was removed, indicating cleanup of an unused import. No functional changes to the stepper logic itself were observed since the prior minute's updates.

**Patterns and Recurring Elements:**
*   **Iconography and Sizing:** There was a consistent effort to standardize and manage the visual size and color of various transport and location icons within the stepper.
*   **Conditional Logic Refinement:** The primary area of ongoing change was the `getTrackingDetails` function, which saw multiple rewrites and simplifications to accurately represent different shipment scopes ("Port-Port", "Port-Rail-Door", "Port-Rail", "Port-Door") and their respective completion statuses and vehicle icons. This demonstrates an iterative process to make the tracking logic robust and visually intuitive.
*   **Date Formatting Consistency:** Reliance on the `appDateFormat` utility from `utils.ts` and `moment.js` for consistent date display is evident throughout the component.
*   **UI Layout Adjustments:** Repeated changes to the `width` of spacer `Box` elements in the `iconRow` indicate fine-tuning of the visual layout and spacing of the stepper.

## 4:19:37 PM
The changes log primarily details development on two files: `c:\Users\ridap\OneDrive\Documents\T360-V2\t360-frontend-v2\src\utils\utils.ts` and `c:\Users\ridap\OneDrive\Documents\T360-V2\t360-frontend-v2\src\pages\shipment\tracking-stepper.tsx`.

### File-Specific Updates:

**1. `c:\Users\ridap\OneDrive\Documents\T360-V2\t360-frontend-v2\src\utils\utils.ts`**
*   **Timestamp of activity:** 12/29/2025, between 2:04:58 PM and 2:20:12 PM.
*   **Summary:** This file contains a collection of utility functions for date formatting and string manipulation. `appDateFormat` handles date string conversion to "MM/DD/YYYY" or "YYYY-MM-DD", `parseRawString` cleans and splits raw strings, `useDateFormate` provides dynamic date formatting based on user preferences fetched via `useFetchUserPreferenceQuery`, `dateFilterHandle` calculates date ranges for various filters (e.g., "today", "this_week", "last_6_months", "custom"), and `showLessText` truncates strings.
*   **Key Changes:** Across all listed entries for this file, the content remains identical. This suggests either a series of saves without code modifications or a logging artifact capturing the same stable state multiple times within this period. The presence of a `console.log("data====pppp",data)` in `useDateFormate` hints at debugging during this period.

**2. `c:\Users\ridap\OneDrive\Documents\T360-V2\t360-frontend-v2\src\pages\shipment\tracking-stepper.tsx`**
*   **Timestamp of significant changes:** 12/29/2025, between 2:22:24 PM and 4:17:42 PM.
*   **Summary:** This React component (`TrackingStepper`) is responsible for visualizing a shipment's progress through various stages (Port of Loading (POL), Port of Discharge (POD), Rail Destination, Consignee Location/Door). It dynamically renders icons (ship, anchor, railway, truck) and progress lines based on `trackingInfo` props.
*   **Key Changes and Evolution:**
    *   **Initial Structure (around 2:22:24 PM):** The component was set up with helper functions for date formatting (`formatDate`), custom SVG icons for locations and terminals (`LocationPinIcon`, `TerminalIcon`), and a core `getTrackingDetails` function to build a timeline array. It included a `getTravelProgress` function (later removed/commented) and a `validateTimelineCompletion` function. Icon sizes were initially larger (e.g., 24px for `LocationPinIcon`).
    *   **Icon Size Adjustments (around 2:24:43 PM - 2:25:03 PM):** Icons like `TerminalIcon`, `ShipIcon`, `TruckSVGIcon`, `Railway` (now `MdDirectionsRailway`), and `LocationPinIcon` had their display sizes reduced from 24px/18px to a consistent 14px.
    *   **Typo Correction (around 2:30:19 PM):** A minor typo "Inland ETA123:" was corrected to "Inland ETA:" in the rail destination subtitle.
    *   **Refactoring & Logic Changes (around 2:35:08 PM - 3:04:52 PM):**
        *   The `getTravelProgress` function was entirely removed/commented out, indicating a shift away from dynamic, time-based progress calculation on the frontend.
        *   The `getTrackingDetails` function underwent substantial iterative restructuring. It moved from a complex conditional logic using `hasRail`, `hasTruck`, and `path1/path2/path3` flags, attempting to define completion states and percentages for different shipment scopes (Port-Port, Port-Rail, Port-Door).
        *   `TrainSVGIcon` was temporarily imported and then removed/re-added.
        *   The logic for determining `isDoorCompleted` and associated `percentage` values was frequently tweaked and refined. A `console.log("isDoorCompleted :: ", isDoorCompleted)` was introduced for debugging.
    *   **Major Re-architecture & Type Safety (around 3:07:17 PM - 4:00:39 PM):**
        *   The `getTrackingDetails` function was moved inside the `TrackingStepper` component, becoming a local utility.
        *   The `polToPodcompletedValidation` function was simplified and refined, including a new date comparison logic (`new Date(eta).getTime() < Date.now()`).
        *   The overall structure of `getTrackingDetails` was simplified, using early returns for different `scope` types (Port-Port, Port-Rail/Port-Rail-Door, Port-Door).
        *   Crucially, TypeScript interfaces (`ShipmentProgress`, `TrackingInfo`, `TimelineItem`, `TrackingStepperProps`) were introduced, significantly improving code readability, maintainability, and type safety for the component's props and internal data structures.
        *   Nullish coalescing operator (`??`) was adopted for providing default string values (e.g., `info.pol ?? ""`).
        *   The `normalizeTimelineProgress` function was briefly added to standardize progress percentages but was later removed as the `getTrackingDetails` logic integrated completion handling more directly.
        *   Styling adjustments were made to ensure consistent icon sizing and layout, including `overflowX: "hidden"` for the wrapper to prevent horizontal scrolling.
    *   **Continued Refinements in Completion Logic (around 4:05:06 PM - 4:17:42 PM):**
        *   Further adjustments were made to the `percentage` calculation logic for various timeline steps (especially POD and final delivery), with values often toggling between `50` and `100` based on `completed` status and preceding steps.
        *   The `polToPodcompletedValidation` function was modified to use `info.eta || finalETA` and `info.ata || finalATA` for determining POD completion, making it more flexible.
        *   The `isEtaAtaAvailable` check in POL was broadened to consider both `eta/ata` and `inland_eta/rail_ata`.

### Patterns and Recurring Elements:

*   **Iterative Development:** The `tracking-stepper.tsx` file shows a clear pattern of iterative development, with frequent commits/saves that refine logic, adjust UI elements (like icon sizes and spacing), and enhance code structure (e.g., introducing TypeScript).
*   **Date and Time Handling Focus:** Both files heavily deal with date and time formatting and calculations, indicating a core feature related to tracking and scheduling. The `utils.ts` file provides foundational date helpers, while `tracking-stepper.tsx` consumes these helpers to display dates and determine completion status on a timeline.
*   **Debugging Artifacts:** The presence of `console.log` statements (e.g., "data====pppp" and "isDoorCompleted :: ") suggests active debugging during the development cycle.
*   **UI/UX Refinements:** Minor adjustments to icon sizes and styling properties (`right`, `transform` in `vehicleBox`) point to ongoing visual and layout refinements for the tracking stepper component.
*   **Progress Calculation Complexity:** The logic for calculating completion percentages and assigning icons along the tracking timeline is complex and underwent multiple revisions, reflecting the challenge of accurately representing diverse shipment progress scenarios.
*   **Adoption of Modern JavaScript/TypeScript Features:** The use of nullish coalescing operator `??` and TypeScript interfaces indicates a move towards more robust and maintainable code.

## 5:19:23 PM
The provided log shows a series of changes to the `tracking-stepper.tsx` file, a React component responsible for displaying shipment tracking progress. All changes occurred on **12/29/2025** between **3:14:00 PM and 5:09:15 PM**, indicating active development or debugging sessions.

### File-Specific Updates in `c:\Users\ridap\OneDrive\Documents\T360-V2\t360-frontend-v2\src\pages\shipment\tracking-stepper.tsx`:

The primary focus of these changes revolves around refining the logic for displaying tracking information, especially completion status (`completed`) and progress percentage (`percentage`) for different stages of a shipment.

**Early Changes (3:14 PM - 3:17 PM):**
*   Initial code established the structure for a tracking stepper, including helper functions (`formatDate`, `LocationPinIcon`, `TerminalIcon`, `getFinalInlandDates`, `polToPodcompletedValidation`, `getTrackingDetails`, `validateTimelineCompletion`) and the `TrackingStepper` React component.
*   The `getTrackingDetails` function dynamically builds a `timeline` array based on `trackingInfo.shipmentProgress.scope` (e.g., "Port-Port", "Port-Rail-Door", "Port-Door").
*   Percentage and completion logic were present but saw minor adjustments across different timestamps. For instance, the initial `percentage` for the POD/Terminal step was `podCompleted ? 50 : trackingInfo.atd ? 50 : 0`, which later shifted.

**Mid-Range Changes (3:19 PM - 3:34 PM):**
*   **Door Completion Logic Refinement:** Multiple commits were dedicated to adjusting the `isDoorCompleted` boolean calculation.
    *   Initially, `isDoorCompleted` checked for `delivery_customer_date !== null && delivery_customer_location !== null && delivery_customer_location !== "Consignee Location"`.
    *   This was modified to `!!trackingInfo.delivery_customer_date && !!trackingInfo.delivery_customer_location && trackingInfo.delivery_customer_location !== "Consignee Location"`.
    *   One commit temporarily introduced a logical OR condition (`||`) in `isDoorCompleted`, which was quickly reverted back to logical AND (`&&`), indicating debugging or testing of the completion criteria.
    *   The `percentage` for the door leg was also adjusted from `100 : 0` to `100 : 50` when `delivery_customer_date` is present but `isDoorCompleted` is false.
    *   A brief change attempted to use `trackingInfo.delivery_customer_date ? isDoorCompleted : false` for `completed`, which was then reverted.
    *   A `console.log("isDoorCompleted :: ", isDoorCompleted)` statement was added and persisted across several commits, suggesting ongoing debugging of this specific condition.
*   **POD/Terminal Percentage Update:** The `percentage` for the POD/Terminal step was changed from `podCompleted ? 50 : trackingInfo.atd ? 50 : 0` to `podCompleted ? 100 : trackingInfo.atd ? 50 : 50`, indicating a desire for a more distinct progression when the POD is completed.
*   **POL Icon Logic:** The `icon` for the POL (Port of Loading) step was made dependent on `notDeprted` (meaning `!trackingInfo.atd`), showing `ShipIcon` only if the shipment has departed.

**Later Changes (3:38 PM - 4:17 PM):**
*   **Introduction of Types:** Significant refactoring introduced TypeScript interfaces (`ShipmentProgress`, `TrackingInfo`, `TimelineItem`, `TrackingStepperProps`) for better code clarity and maintainability.
*   **Consolidation of `getTrackingDetails` Logic:** The `getTrackingDetails` function was refactored. Instead of conditionally pushing timeline items based on `scope` and `hasRail`/`hasTruck`, the logic was streamlined.
*   **`normalizeTimelineProgress` Function (Temporary):** A new helper `normalizeTimelineProgress` was briefly added (3:38 PM) to adjust percentages and completion status for earlier steps if later steps were completed. This function was subsequently removed, indicating a change in strategy for handling step progression or that the logic was not entirely suitable.
*   **Nullish Coalescing Operator (`??`):** The use of `??` (nullish coalescing operator) was introduced in `getFinalInlandDates` and for default label values (`info.pol ?? ""`, `info.rail_destination ?? "Rail Destination"`, etc.), improving null/undefined handling.
*   **POD/Terminal Pin Icon Logic:** The `pinIcon` for the POD/Terminal step was changed multiple times, oscillating between `"terminal"` and `"pin"`, and at one point being conditional on `podCompleted`.
*   **POD/Terminal `percentage` logic:** Changed from `podCompleted ? 50 : trackingInfo.atd ? 50 : 50` to `podCompleted ? 100 : 50`.
*   **Railway Icon for POD/Terminal:** An attempt was made to display the `RailwayIcon` for the POD/Terminal step (4:17 PM) based on `notDeprted` and `isInlandAtaAvailable` (which was a newly introduced boolean).

**Final Changes (4:41 PM - 5:09 PM):**
*   **Refinement of POL/POD Icons and Colors:** The logic for rendering the `ShipIcon` and `RailwayIcon` with conditional colors (`#2E7D32` for completed, `#000` for active) for the POL and POD/Terminal steps was repeatedly adjusted, focusing on when to show these icons and their color based on `isEtaAtaAvailable` and `isInlandAtaAvailable`. The `centerIcon` flag was consistently set to `isEtaAtaAvailable` for the POL and `isInlandAtaAvailable` for the POD.
*   **POD/Terminal Pin Icon Finalization:** The `pinIcon` for the POD/Terminal step was finally settled on `!podCompleted && trackingInfo.atd ? "terminal" : "terminal"`, indicating it should always be a "terminal" icon, but its color will be based on completion.
*   **Railway Icon on POD/Terminal:** The `RailwayIcon` was introduced as the `icon` for the POD/Terminal step, with conditional coloring based on `isInlandAtaAvailable`.
*   **Rail Destination Icon Logic:** The `icon` for the "Port -> Rail" step was also adjusted, initially using `RailwayIcon`, then briefly `ShipIcon`, and finally settling back on `RailwayIcon` but only if `podCompleted && finalATA` are true, otherwise it is `null`.

### Patterns and Recurring Elements:

1.  **Iterative Refinement of Completion Logic:** A major pattern is the continuous tweaking of the `completed` and `percentage` properties for each timeline step, particularly for the final "Door" step and the "POD/Terminal" step. This suggests a struggle to correctly represent the progress state under various tracking scenarios.
2.  **Conditional Icon Rendering and Styling:** The icons (Ship, Railway) and their colors are frequently modified based on shipment status (e.g., `notDeparted`, `isEtaAtaAvailable`, `podCompleted`, `finalATA`). There's an ongoing effort to visually convey the status of each leg of the journey.
3.  **Debugging through `console.log`:** The presence and removal of `console.log("isDoorCompleted :: ", isDoorCompleted)` is a clear indicator of active debugging during this series of changes, specifically concerning the "Port -> Door" completion logic.
4.  **Gradual Introduction of Type Safety:** The addition of `interface` definitions for `ShipmentProgress`, `TrackingInfo`, `TimelineItem`, and `TrackingStepperProps` marks a shift towards a more robust and type-safe codebase, suggesting a more structured development approach was being adopted or enforced.
5.  **Nullish Coalescing for Defaults:** The consistent use of `??` operator for providing default string values (e.g., `info.pol ?? "Port of Loading"`) indicates a focus on handling potentially null or undefined data gracefully in the UI.

In summary, the changes to `tracking-stepper.tsx` are characterized by a detailed, iterative process of defining and refining the visual representation and logical flow of shipment tracking information, with a notable shift towards stronger type definitions and explicit handling of tracking data states.

## 6:20:04 PM
The provided log details a series of iterative changes to a single file: `c:\Users\ridap\OneDrive\Documents\T360-V2\t360-frontend-v2\src\pages\shipment\tracking-stepper.tsx`. This file contains a React functional component `TrackingStepper` responsible for visually representing shipment progress through a timeline.

**File-Specific Updates (`tracking-stepper.tsx`):**

The changes primarily revolve around refining the logic for displaying the shipment tracking timeline accurately across various shipping scopes ("Port-Port", "Port-Door", "Port-Rail", "Port-Rail-Door"). Key updates include:

1.  **Icon Placement and Styling (Initial: 4:05:06 PM):** Early changes introduced conditional styling for the `vehicleBox` to allow icons to be centered on the progress line if `item.centerIcon` is true.
2.  **Timeline Item Completion Logic:**
    *   The `percentage` calculation for progress lines underwent frequent adjustments, particularly for the "Port of Discharge (POD) / TERMINAL" and "Port → Rail" segments. There was noticeable iteration on setting the percentage to `100`, `50`, or `0` based on various completion criteria (`podCompleted`, `finalATA`, `notDeparted`).
    *   The `polToPodcompletedValidation` function was briefly modified to consider `finalETA` and `finalATA` in addition to `info.eta` and `info.ata` for determining completion, but this change was later reverted.
3.  **Dynamic Icon Selection and Rendering:**
    *   **Refactoring Attempt (4:07:08 PM):** A significant but temporary refactoring introduced new imports (MUI `CalendarMonthOutlinedIcon`, local `VesselSVGIcon`, `html2canvas-pro` type), redefined existing icons (`Terminal`, `TruckSVGIcon`, `Railway`), and added a `validateTimelineCompletion` function. This approach was largely reverted in subsequent commits (4:08:00 PM - 4:10:16 PM), indicating a preference for the original, simpler structure.
    *   **Vehicle Icon Logic (4:43:58 PM onwards):** Extensive iteration occurred on which vehicle icon (`ShipIcon`, `RailwayIcon`, `Truck`) should be displayed at specific points (e.g., at POD or during a rail segment) and under what conditions. This involved complex conditional checks based on `isEtaAtaAvailable`, `isInlandAtaAvailable`, `notDeparted`, `hasRail`, and `hasTruck`.
    *   **Truck Icon Source (6:12:25 PM - 6:14:45 PM):** The implementation of the truck icon changed from an import from `@heroicons/react/16/solid` to using `FaTruck` from `react-icons/fa6`, ensuring consistency with other imported icons.
4.  **Shipment Scope Handling (5:22:57 PM):** Refined the conditional rendering of the "Port → Rail" and "Port → Door" sections using `hasRail` and `hasTruck` flags, improving the accuracy of how different shipment types are visualized.
5.  **Small Edge Case Handling (4:41:03 PM):** A minor but practical improvement was made to ensure that progress lines with an icon would still display a minimum width (1%) even if their calculated percentage was 0, preventing visual disappearance.

**Timestamps of Significant Changes:**

*   **12/29/2025, 4:05:06 PM:** Introduction of conditional icon centering.
*   **12/29/2025, 4:07:08 PM:** Major refactoring attempt, including new imports and logic, which was mostly reverted shortly after.
*   **12/29/2025, 4:08:00 PM - 4:10:16 PM:** Reversion of the 4:07:08 PM refactoring.
*   **12/29/2025, 4:12:44 PM, 4:13:07 PM, 4:13:13 PM:** Iterative adjustments to percentage calculations for POD/Terminal.
*   **12/29/2025, 4:13:55 PM:** Temporary change to `polToPodcompletedValidation` logic.
*   **12/29/2025, 4:15:23 PM:** Reverted the `polToPodcompletedValidation` change and updated `isEtaAtaAvailable` checks.
*   **12/29/2025, 4:41:03 PM:** Adjustment to line width calculation for better icon visibility.
*   **12/29/2025, 5:22:57 PM:** Refinement of conditional logic for displaying rail and door segments based on `hasRail` and `hasTruck`.
*   **12/29/2025, 5:31:54 PM - 5:35:48 PM:** Introduction of helper variables (`showRailIcon`, `isGreenLine`) and further complex adjustments to POD icon and percentage logic.
*   **12/29/2025, 6:12:25 PM - 6:14:45 PM:** The implementation of the truck icon was refined for consistency across icon libraries.

**Patterns or Recurring Elements in Content:**

*   **Frequent Iteration on `getTrackingDetails` Function:** The most prominent pattern is the continuous modification and fine-tuning of the `getTrackingDetails` function. This suggests that defining the exact behavior for various shipment states and their visual representation was complex and required multiple rounds of refinement.
*   **Conditional Logic Complexity:** There is heavy reliance on `if` statements, nullish coalescing (`??`), and ternary operators to conditionally render and style elements. The conditions often involve combinations of multiple `TrackingInfo` properties like `atd`, `eta`, `ata`, `inland_eta`, `rail_ata`, `delivery_customer_date`, `inland_rail_move`, and `trucker`.
*   **Icon Management Challenges:** The choice and conditional display of the `ShipIcon`, `RailwayIcon`, and `Truck` icon presented recurring challenges, leading to several changes in imports and rendering logic to ensure the correct icon appears at the right time and location.
*   **Consistency in Utility Usage:** `appDateFormat` and `showLessText` from `../../utils/utils` are consistently used throughout the component for data formatting.
*   **Repetitive Saves:** Many log entries contain almost identical code, indicating a high frequency of saves during development, possibly due to auto-save features or small, incremental changes.

## 7:19:29 PM
The provided log details changes to the file `c:\Users\ridap\OneDrive\Documents\T360-V2\t360-frontend-v2\src\pages\shipment\tracking-stepper.tsx` across several timestamps on 12/29/2025. This file appears to be a React component named `TrackingStepper` responsible for displaying shipment tracking progress.

**File-specific Updates and Timestamps:**

*   **12/29/2025, 4:53:15 PM to 4:54:41 PM**: Initial commits and minor adjustments. The component is primarily concerned with rendering a timeline of shipment events based on `trackingInfo` props, including Port of Loading (POL), Port of Discharge (POD), Rail Destination, and Consignee Location (Door). It calculates completion percentages and displays icons (Ship, Terminal, Location Pin, Railway) dynamically. There were several small tweaks around `pinIcon` logic for the POD/TERMINAL step (e.g., from `""` to `"terminal"`, then back to `"pin"` before stabilizing on `"terminal"`).
*   **12/29/2025, 5:02:38 PM**:
    *   **Change**: The `icon` for the "PORT → RAIL" step was modified. It now conditionally renders `RailwayIcon` only if `podCompleted` is true, otherwise it is `null`.
*   **12/29/2025, 5:02:59 PM**:
    *   **Change**: The `icon` for the "PORT → RAIL" step was further modified. It now renders `RailwayIcon` if both `podCompleted` and `finalATA` are true, otherwise it still renders `RailwayIcon` (this seems like a slight redundancy or an intermediate step).
*   **12/29/2025, 5:03:04 PM**:
    *   **Change**: The `icon` logic for "PORT → RAIL" was reverted or refined to be `podCompleted && finalATA ? RailwayIcon : RailwayIcon`. This effectively means `RailwayIcon` is always shown if it reaches this stage.
*   **12/29/2025, 5:04:14 PM**:
    *   **Change**: The "POD / TERMINAL" step now always explicitly includes `RailwayIcon` as its `icon`.
*   **12/29/2025, 5:04:28 PM**:
    *   **Change**: The "POD / TERMINAL" step's `icon` logic was reverted or changed to display `ShipIcon` if not departed (`!notDeparted`), similar to the POL step, but with a condition `isEtaAtaAvailable`.
*   **12/29/2025, 5:04:35 PM**:
    *   **Change**: The "POD / TERMINAL" step's `icon` was changed from `ShipIcon` to `RailwayIcon` under similar `!notDeparted` and `isEtaAtaAvailable` conditions.
*   **12/29/2025, 5:04:58 PM**:
    *   **Change**: The "POD / TERMINAL" step's `icon` was changed to `null`, and the `icon` for "PORT → RAIL" was also set to `null`.
*   **12/29/2025, 5:05:32 PM**:
    *   **Change**: The "POD / TERMINAL" step's `icon` was restored to display `RailwayIcon` conditionally, and a `centerIcon` property was added to this step, linked to `isInlandAtaAvailable`.
*   **12/29/2025, 5:08:33 PM**:
    *   **Change**: The `pinIcon` for the "POD / TERMINAL" step was changed from `"terminal"` to `"pin"` if `!podCompleted && trackingInfo.atd` is true.
*   **12/29/2025, 5:08:44 PM**:
    *   **Change**: The `pinIcon` logic for "POD / TERMINAL" was again adjusted, setting it to `"pin"` if `!podCompleted && trackingInfo.atd` is true, otherwise `"terminal"`.
*   **12/29/2025, 5:22:57 PM**:
    *   **Significant Refactoring**: Introduced `hasRail` and `hasTruck` boolean variables to control conditional rendering for "PORT → RAIL" and "PORT → DOOR" sections based on `inland_rail_move` and `trucker`/`delivery_customer_location`/`delivery_customer_date` respectively. The logic for including these sections in the `timeline` array was updated to use these new flags.
*   **12/29/2025, 5:23:13 PM**:
    *   **Change**: Modified the condition for rendering the "PORT → DOOR" step to `scope === "Port-Door" || scope === "Port-Rail-Door" && hasTruck || hasRail`. This looks like a logical error as `hasRail` is an OR condition at the end.
*   **12/29/2025, 5:25:36 PM**:
    *   **Change**: A new boolean `isInlandAtaAvailable` was introduced, which checks for both `finalATA` and `trackingInfo.ata`, potentially refining the completion logic for intermediate steps. This new variable is used in the `color` and `centerIcon` conditions for the "POD / TERMINAL" step's icon.
*   **12/29/2025, 5:26:19 PM**:
    *   **Change**: The `percentage` calculation for the "POD / TERMINAL" step was updated to `isInlandAtaAvailable ? 100 : 0`.
*   **12/29/2025, 5:26:40 PM**:
    *   **Change**: The `percentage` calculation for the "POD / TERMINAL" step was reverted, now `podCompleted ? 50 : isInlandAtaAvailable ? 100 : 50`.
*   **12/29/2025, 5:27:19 PM**:
    *   **Change**: The `percentage` calculation for the "POD / TERMINAL" step was changed to `notDeparted ? 50 : isInlandAtaAvailable ? 100 : 50`.
*   **12/29/2025, 5:31:54 PM**:
    *   **Refactoring**: Introduced new variables `showRailIcon` and `isGreenLine` to control rendering of the `RailwayIcon` and the line's green progress for the "POD / TERMINAL" step, improving readability and logic. The `percentage` for POD was adjusted to `isGreenLine ? (podCompleted ? 50 : 0) : 0`.
*   **12/29/2025, 5:35:48 PM**:
    *   **Change**: The `icon` logic for the "POD / TERMINAL" step was updated to show `RailwayIcon` only if `podCompleted` and `!notDeprted` are true. `centerIcon` also now requires `podCompleted && isInlandAtaAvailable`.
*   **12/29/2025, 5:39:08 PM**:
    *   **Change**: Corrected logical condition for "PORT → RAIL" and "PORT → DOOR" steps by adding parentheses around `(scope === "Port-Rail-Door" && hasRail)` and `(scope === "Port-Rail-Door" && hasTruck)`.
*   **12/29/2025, 5:41:54 PM**:
    *   **Change**: Reverted `pinIcon` for "POD / TERMINAL" to `!podCompleted && trackingInfo.atd ? "terminal" : "pin"`.
*   **12/29/2025, 5:43:17 PM**:
    *   **Change**: The `pinIcon` for "POD / TERMINAL" was changed again, becoming `"pin"` if `podCompleted && trackingInfo.atd`, otherwise `"terminal"`.
*   **12/29/2025, 6:02:38 PM**:
    *   **Error**: Introduced a syntax error in the `pinIcon` condition for "POD / TERMINAL" (`podCompleted && trackingInfo.atd && ? "pin" : "terminal"`).
*   **12/29/2025, 6:02:45 PM**:
    *   **Fix**: Corrected the syntax error in the `pinIcon` condition for "POD / TERMINAL" by removing the extraneous `&&`.
*   **12/29/2025, 6:11:38 PM**:
    *   **Change**: The condition for rendering the `RailwayIcon` in the "POD / TERMINAL" step's icon was modified from `!notDeprted` to `!hasRail`.
*   **12/29/2025, 6:12:25 PM**:
    *   **New Import/Icon**: Imported `TruckIcon` from `@heroicons/react/16/solid` and defined `TruckIcon` component using it.
*   **12/29/2025, 6:12:47 PM**:
    *   **Change**: `TruckIcon` import was redundant, changed to use `Icon` from `@iconify/react` for the truck icon.
*   **12/29/2025, 6:13:12 PM**:
    *   **Fix**: Corrected import conflict for `TruckIcon` by aliasing one import to `Truck`.
    *   **Change**: Switched to using `Truck` for the icon in the "POD / TERMINAL" step if `hasTruck` is true.
*   **12/29/2025, 6:14:45 PM**:
    *   **Refactoring**: Changed `ShipIcon` from `@iconify/react` to `FaShip` from `react-icons/fa6` and `Truck` to `FaTruck` from `react-icons/fa6`, removing `@iconify/react` dependency for specific icons.
*   **12/29/2025, 6:16:05 PM**:
    *   **Change**: The `icon` condition for "POD / TERMINAL" was updated to `podCompleted && hasTruck || hasRail ? Truck : null`, implying truck icon or rail icon if either is relevant. This is likely an error as it always shows truck if hasTruck, or the rail if hasRail, but combines them incorrectly.
*   **12/29/2025, 6:21:32 PM**:
    *   **Fix**: The `icon` logic for "POD / TERMINAL" was corrected to `hasTruck ? Truck : hasRail ? RailwayIcon : null`, ensuring correct icon display based on the type of inland movement.
*   **12/29/2025, 6:23:08 PM**:
    *   **Error**: `hasTruck` variable initialization was truncated (`const hasTruck = !!info.trucker`).
*   **12/29/2025, 6:23:31 PM**:
    *   **Fix**: `hasTruck` variable initialization was corrected.
*   **12/29/2025, 6:54:14 PM**:
    *   **Duplicate Logic**: Added a duplicate conditional block for `if (scope === "Port-Rail-Door" && hasRail)` in `getTrackingDetails`, essentially repeating the logic for the "PORT → RAIL" step.
*   **12/29/2025, 6:57:13 PM**:
    *   **Change**: The `completed` status for the duplicate "PORT → RAIL" block was changed from `!!finalATA` to `Boolean(finalATA)`.
*   **12/29/2025, 7:00:26 PM**:
    *   **Change**: The `completed` condition for the "POL" step was updated to `!!trackingInfo.atd || hasRail && isRailVerified`. This makes POL completed if ATD is available OR if there's a rail move and rail arrival is verified.
*   **12/29/2025, 7:01:58 PM**:
    *   **Conditional Rendering for POD**: Introduced an `if/else` block for rendering the "POD / TERMINAL" step. If `hasRail` and `scope === "Port-Rail-Door"`, the POD completion and icon logic are adjusted (e.g., `percentage` uses `isRailVerified`). Otherwise, it uses the existing logic.
*   **12/29/2025, 7:08:00 PM**:
    *   **Bug Fix in POD icon**: The `icon` rendering for the conditional "POD / TERMINAL" block (when `hasRail && scope === "Port-Rail-Door"`) was changed. If `!podCompleted` is true, the icon is rendered, and its color depends on `isRailVerified`.
*   **12/29/2025, 7:08:44 PM**:
    *   **Bug Fix in POD icon color**: The `centerIcon` condition for the POD step in the `hasRail && scope === "Port-Rail-Door"` block was changed from `podCompleted && isRailVerified` to `!podCompleted && isRailVerified`.
*   **12/29/2025, 7:10:06 PM**:
    *   **Debug/Test Labels**: The `subtitle` for the first "PORT → RAIL" block was temporarily changed to include "Inland ETA@@:" and the second (duplicate) block to "Inland ETA123:", likely for debugging purposes.
*   **12/29/2025, 7:13:17 PM**:
    *   **Refinement of Rail Destination Label**: In the primary "PORT → RAIL" block, the `label` was changed to `hasRailMove ? info.rail_destination : "Rail Destination"`, where `hasRailMove` now explicitly checks `Boolean(info.rail_destination)`. This makes the label conditional on whether `rail_destination` is truly present.
*   **12/29/2025, 7:13:49 PM**:
    *   **Bug**: The condition for the "PORT → RAIL" label `String(hasRailMove) ?? "Rail Destination"` seems like a typo, attempting to use a boolean as a string.

**Patterns and Recurring Elements:**

*   **Consistent File Modification**: All changes occur within a single file: `c:\Users\ridap\OneDrive\Documents\T360-V2\t360-frontend-v2\src\pages\shipment\tracking-stepper.tsx`.
*   **Rapid Iteration**: The timestamps show a very rapid succession of changes, often within seconds or a few minutes, indicating active development, debugging, and minor adjustments being made in quick succession.
*   **Shipment Tracking Logic**: The core functionality revolves around defining a "tracking stepper" or timeline for different shipment progress scopes ("Port-Port", "Port-Door", "Port-Rail", "Port-Rail-Door").
*   **Conditional Rendering**: A significant portion of the changes involves refining conditional logic for displaying icons, setting completion status (`completed`), and calculating progress percentages (`percentage`) based on the availability of tracking data (ETA, ATA, ATD, inland dates) and the specific shipment scope (e.g., `hasRail`, `hasTruck`, `isRailVerified`).
*   **Icon Management**: There's a noticeable pattern of switching and refining which icons (Ship, Railway, Truck) are displayed at each step, and under what conditions, including changing import sources for some icons (e.g., `Icon` from `@iconify/react` to `FaShip` from `react-icons/fa6`).
*   **Debugging Artifacts**: Some changes, like adding "@@" or "123" to labels (7:10:06 PM, 7:12:10 PM), suggest active debugging or testing of conditional display logic.
*   **Complexity in Conditional Logic**: The `getTrackingDetails` function is the most heavily modified part, especially the logic determining the `percentage`, `icon`, `pinIcon`, and `centerIcon` for each `TimelineItem`, indicating a struggle to accurately represent complex shipment states visually.
*   **Refinement of Completion/Availability Checks**: Variables like `isEtaAtaAvailable`, `isInlandAtaAvailable`, `isRailVerified` are introduced and adjusted over time to encapsulate specific data availability checks.