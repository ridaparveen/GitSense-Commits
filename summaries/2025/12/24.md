# Activity Summary for 12/24/2025

## 10:37:33 AM
The code changes primarily affect two files: `src\pages\shipment\tracking-stepper.tsx` and `src\SelectCustomer.tsx`.

### File-Specific Updates:

**`c:\Users\ridap\OneDrive\Documents\T360-V2\t360-frontend-v2\src\pages\shipment\tracking-stepper.tsx`**

*   **Early Changes (12/23/2025, 2:31:01 PM - 2:40:01 PM)**: A series of minor, rapid adjustments, often involving commenting out and then uncommenting styling properties (`s.wrapper`, `s.root`, `s.vehicleBox`, `s.lineWrapper`, `s.infoRow`) or icon dimensions (`width`, `height` for `TrainSVGIcon`, `TruckSVGIcon`). There were also slight `minWidth` adjustments for `iconRow` and `infoRow`, indicating layout fine-tuning or responsive design attempts.
*   **Debugging with Hardcoded Dates (12/23/2025, 2:45:11 PM - 4:36:53 PM)**: Multiple timestamps show the introduction and subsequent removal/modification of hardcoded dates (e.g., `'2025-04-29'`, `'2023-12-31'`) and temporary labels (e.g., "ETA:123", "ETA@@:") within the `formatDate` calls and `polToPodcompletedValidation` function. This suggests extensive debugging of date-related logic and display.
*   **Major Refactoring Attempt and Reversion (12/23/2025, 4:45:54 PM - 4:46:20 PM)**: A significant refactoring effort was made to simplify the `TrackingStepper` component by removing the `getTrackingDetails` helper and constructing the timeline directly within the main component. This also involved renaming internal icon variables and changing the `useEffect` dependency for progress calculation. This refactor was almost immediately reverted, indicating it was either exploratory or not ready for integration.
*   **Evolved Tracking Logic (12/23/2025, 3:39:02 PM onwards)**:
    *   The `polToPodcompletedValidation` function was completely rewritten to handle different completion criteria based on `trackingInfo.atd` (if shipment has departed) and `trackingInfo.t49_shipment_added` status.
    *   The core `getTrackingDetails` logic was extensively modified to dynamically build the tracking timeline based on `inland_rail_move` property. It now explicitly handles "no rail" (truck) and "rail move" scenarios, including details for intermediate stops like "Rail Destination" and "Consignee Location".
    *   Introduction of `path1`, `path2`, `path3` boolean flags to control progress logic and icons.
    *   Introduction of `icon_text` property in timeline items, though its usage in rendering is not fully apparent in the provided snippets.
*   **Icon Library and Dynamic Styling (12/23/2025, 6:03:01 PM - 7:47:06 PM)**:
    *   Shifted from using `@iconify/react` for `TruckSVGIcon` to `react-icons/fa6` (`FaShip`) and `react-icons/md` (`MdDirectionsRailway` for `Railway` icon), and introduced `FaAnchor` for `Terminal` icon.
    *   Implemented dynamic positioning for the vehicle icon along the progress line (`s.vehicleBox` with `left: \`calc(${item.percentage}% - 12px)\` `).
*   **`console.log` for Debugging**: Several `console.log` statements were added, particularly for `trackingInfo` and `getTravelProgress`, suggesting active debugging throughout the development.

**`c:\Users\ridap\OneDrive\Documents\T360-V2\t360-frontend-v2\src\pages\shipment\shipment-details-page.tsx`**

*   **Integration of `TrackingStepper` (12/23/2025, 2:37:36 PM)**: The `TrackingStepper` component (from the other file) was integrated into the `ShipmentDetailsPage`, indicating a new feature to display shipment progress.
*   **Minor Layout Adjustments (12/23/2025, 2:37:50 PM - 2:38:05 PM)**: The `TrackingStepper` component was briefly moved within the page's JSX layout, and then reverted, suggesting minor UI positioning experiments.
*   **Debugging (`console.log`)**: Multiple `console.log` statements were added to inspect `shipmentDeatils`, `isLoading`, `isFetching`, and `isSuccess` states, indicating active debugging of data fetching and component rendering.

**`c:\Users\ridap\OneDrive\Documents\T360-V2\t360-frontend-v2\src\SelectCustomer.tsx`**

*   **Initial State and Frontend Pagination (12/23/2025, 8:37:09 PM)**: The `SelectCustomerPanel` component was initially designed to fetch all customer options once (`fetchAllCustomers`) and then perform filtering and pagination on the client-side.
*   **Transition to Backend Pagination and Search (12/23/2025, 8:49:11 PM - 8:57:59 PM)**: A significant architectural shift occurred. The component was refactored to implement server-side pagination and search.
    *   A new `fetchCustomers` function was introduced to make API calls with `pageNo` and `keyword` parameters, updating `allOptions` (now representing the current page's data) and `total` (total items from API).
    *   The `useEffect` hook now triggers `fetchCustomers(1)` when the panel opens.
    *   `handlePageChange` and `handleSearchChange` are updated to call `fetchCustomers` with the relevant page number and search keyword, indicating that search and pagination are now handled by the backend API.
*   **Code Clarity (12/24/2025, 10:32:22 AM - 10:36:12 AM)**: Minor updates to add comments clarifying the shift from frontend to backend pagination logic. No functional changes in these very late timestamps.

### Timestamps of Significant Changes:

*   **12/23/2025, 3:39:02 PM**: Major rewrite of `polToPodcompletedValidation` and `getTrackingDetails` in `tracking-stepper.tsx`, introducing complex conditional logic for shipment progress.
*   **12/23/2025, 4:45:54 PM**: First attempt at a major refactor of `TrackingStepper`'s rendering logic (later reverted).
*   **12/23/2025, 6:03:01 PM - 6:07:21 PM**: Introduction of `react-icons` for some vehicle icons in `tracking-stepper.tsx`, replacing `@iconify/react` for those specific elements.
*   **12/23/2025, 6:20:04 PM**: Implementation of dynamic vehicle icon positioning along the progress line in `tracking-stepper.tsx`.
*   **12/23/2025, 8:49:11 PM**: Significant overhaul of `SelectCustomer.tsx` to switch from client-side to server-side pagination and search for customer options.

### Patterns and Recurring Elements:

*   **Iterative Development and Debugging**: A strong pattern of small, sequential changes, often followed by reverts (commenting/uncommenting sections, temporary hardcoded values, `console.log` statements), indicates an active, iterative development process with frequent debugging.
*   **Refactoring Efforts**: Both files show attempts at refactoring core logic (`getTrackingDetails` in `tracking-stepper.tsx` and pagination in `SelectCustomer.tsx`). While one refactor was reverted, the other (pagination) was successfully implemented, suggesting ongoing code improvement.
*   **UI/UX Enhancements**: Changes related to icon styles, layout adjustments, and dynamic icon positioning point towards continuous refinement of the user interface and experience for tracking shipments and selecting customers.
*   **Backend Integration**: The shift in `SelectCustomer.tsx` to backend-driven pagination and search signifies a move towards more scalable and efficient data handling, reducing client-side processing for large datasets.

## 1:49:14 PM
The `ShipmentTrackingScreen.jsx` file, last updated on **12/23/2025, 10:08:25 AM**, details a React component for displaying comprehensive shipment tracking information. This screen dynamically fetches shipment and vessel tracking data based on `mblno` and `fileno` from URL parameters. It features a layout divided into a main content area and a sidebar, utilizing Material-UI components for structuring. Key elements include a map for tracking, a `TrackingStepper` for status visualization, `CardField` components to display core shipment details (e.g., File No, BL, Supplier, MBL No), and an expandable "More Details" section to reveal additional information like Customer Ref No, Commodity, Consignee, Service, Piece count, and Weight. The screen also incorporates `TrackingInfoContainer` and `MilestonesContainer` for further details. A loading state is managed with a `Loader` component.

The `App.js` file, last updated on **12/24/2025, 10:36:54 AM**, serves as the central routing configuration for the application. It defines an extensive set of routes for various modules, including authentication, user management, dashboards, packing lists, service invoices, PO orders, OTM BOLs, customer/party/agent code management, planboards, detention, commercial invoices, ALC, container reports, report scheduling, and multiple tracking functionalities (FCL, LCL, Rail, Air, Trucking). A predominant pattern across this file is the widespread implementation of role-based access control using `ProtectedRoute` and `AuthGuard` components, alongside a `UserRoleEnum` to restrict access to specific routes based on the user's role (e.g., ADMIN, CUSTOMER, AGENT, SPR_CUSTOMER). Many features are structured with a primary view screen and a corresponding form screen for data entry or modification. The application also uses `ThemeProvider` for consistent styling and `Toaster` for notifications.

**Patterns or Recurring Elements:**

*   **Role-based Access Control:** A strong emphasis on security is evident through the extensive use of `ProtectedRoute` and `UserRoleEnum` to manage user permissions for nearly all application routes.
*   **Modularity and Form-Based Interactions:** The application structure frequently involves dedicated screens for viewing lists of items and separate form screens for creating or editing those items across various modules.
*   **Dashboard and Tracking Focus:** Both files highlight a significant focus on displaying and managing dashboards and detailed tracking information, with specific routes for various tracking modes (shipment, FCL, LCL, Rail, Air).
*   **Material-UI (MUI) Integration:** The consistent use of `@mui/material` components in `ShipmentTrackingScreen.jsx` and the presence of `ThemeProvider` in `App.js` indicate a unified Material-UI design system.
*   **Modern Data Handling:** The use of RTK Query hooks in `ShipmentTrackingScreen.jsx` suggests a modern approach to API interaction and state management.