# Activity Summary for 1/7/2026

## 8:30:11 AM
The log details development activities within a `javascript-learning` directory, all occurring on January 4, 2026.

**File-specific Updates:**

*   **`c:\Users\ridap\OneDrive\Documents\javascript-learning\index.html`**:
    *   Initial creation (1/4/2026, 3:18:32 PM) included a basic HTML structure with a `<h1>Hello world!</h1>` heading and an empty `<button>` element configured with an `onclick` JavaScript alert.
    *   Within nine seconds (1/4/2026, 3:18:41 PM), the button was updated to display the text "Click me".

*   **`c:\Users\ridap\OneDrive\Documents\javascript-learning\0_variables.js`**:
    *   This file began with a `console.log` statement (1/4/2026, 3:36:06 PM) that contained a syntax error (an extra semicolon inside the string).
    *   The syntax error was quickly corrected (1/4/2026, 3:36:47 PM).
    *   Subsequent updates (1/4/2026, 3:38:49 PM and 3:38:57 PM) introduced the declaration of a variable `myAge` using `var`, demonstrating `camel case` notation.
    *   A significant expansion of content occurred around 3:45:07 PM, where several more `var` declarations (`my_firtsName`, `_lastName`, `$myAge`) were added to further illustrate variable naming conventions. This update also temporarily included examples of *invalid* variable names (`123data`, `my@email`) which were logged.
    *   Shortly after (1/4/2026, 3:45:32 PM), the lines declaring and logging the invalid variable names were commented out, indicating a refinement or correction based on JavaScript's naming rules. The final entry for this file (1/4/2026, 3:45:41 PM) showed no functional change from the previous state.

**Timestamps of Significant Changes:**

*   **1/4/2026, 3:18:41 PM**: HTML button text added.
*   **1/4/2026, 3:36:47 PM**: Initial JavaScript syntax error fixed.
*   **1/4/2026, 3:38:49 PM**: First variable declaration introduced in JavaScript.
*   **1/4/2026, 3:45:07 PM**: Major expansion of variable examples, including invalid ones.
*   **1/4/2026, 3:45:32 PM**: Correction/commenting out of invalid variable examples.

**Patterns or Recurring Elements:**

*   **Learning Progression**: The changes clearly indicate a learning process, moving from basic HTML structure and initial JavaScript output to exploring fundamental JavaScript concepts like variable declaration and naming rules.
*   **Iterative Refinement**: There's a pattern of quick iterations, where initial code (e.g., empty button, syntax error, invalid variable names) is immediately followed by corrections, additions, or commenting out of problematic parts.
*   **Focus on Fundamentals**: The JavaScript file specifically demonstrates attempts to understand and apply variable declaration rules, including different valid naming conventions (e.g., `camel case`, use of underscores and dollar signs) and identifying invalid ones.
*   **Single Session**: All changes occurred within a relatively short period on a single day, suggesting active engagement in a learning session.

## 1:57:42 PM
**`c:\Users\ridap\OneDrive\Documents\javascript-learning\index.html`**
This file, likely a main entry point for a web application, saw initial development and a quick refinement.
*   **1/4/2026, 3:18:32 PM:** An HTML boilerplate was established, containing a `<h1>Hello world!</h1>` and an empty `<button>` element with an `onclick` event to display "welcome to my js tutorials".
*   **1/4/2026, 3:18:41 PM:** The immediate update added the text "Click me" inside the button, making it visible and descriptive to the user.

**`c:\Users\ridap\OneDrive\Documents\javascript-learning\0_variables.js`**
This JavaScript file demonstrates fundamental concepts of console logging and variable declaration.
*   **1/4/2026, 3:36:06 PM:** The file began with a `console.log` statement, which initially had a syntax error (semicolon inside the string literal).
*   **1/4/2026, 3:36:47 PM:** The syntax error in `console.log("Hello my first js code!";)` was corrected to `console.log("Hello my first js code!");`.
*   **1/4/2026, 3:38:49 PM:** A variable `myAge` was declared using `var` and assigned a value of 25, then logged to the console. A comment `// camel` was added.
*   **1/4/2026, 3:38:57 PM:** The comment was refined to `// camel case`.
*   **1/4/2026, 3:45:07 PM:** Further variable declarations were added, showcasing different valid naming conventions (e.g., `my_firtsName`, `_lastName`, `$myAge`). This update also included examples of *invalid* variable names (`123data`, `my@email`), which were logged directly.
*   **1/4/2026, 3:45:32 PM:** The lines demonstrating and logging the invalid variable names (`123data` and `my@email`) were commented out, indicating a step in understanding and isolating valid code.
*   **1/4/2026, 3:45:41 PM:** No functional changes were introduced in this last entry, it remained identical to the previous version.

**Patterns and Recurring Elements:**
All changes occurred on **1/4/2026**, suggesting a continuous learning or development session. The file paths indicate a project focused on "javascript-learning". The changes are incremental, starting with basic functionality or syntax, then adding more details, correcting errors, and exploring more advanced concepts (like variable naming rules) within each file. The `.js` file specifically shows a progression from basic `console.log` to understanding variable declaration and naming conventions.

## 1:57:45 PM
`c:\Users\ridap\OneDrive\Documents\T360_Api\t360-backend\src\controllers\analytics\query\booking.query.ts`
- **Timestamp**: 1/2/2026, 2:35:49 PM
- **Key Changes**:
    - Introduced `QueryBuilderI` interface to define parameters for booking queries.
    - Added `bookingQueryBuilder` function to construct SQL queries for analytics reports based on different `type` parameters.
    - Updated `customizer.selectedColumns` to ignore new columns (`country_name`, `networkdays`, `bl_release_date`, `booking_status_action_date`, `est_cargo_ready_date`) and explicitly include others (`bookingdate`, `booking_status_action_date`, `est_cargo_ready_date`, `departure_date`).
    - Implemented several query types:
        - `BookingDatetoActualDeparture`: Calculates average day difference between booking date and actual departure for each `fileno` and `contno`, returning value and percentage against the max value.
        - `BookingDatetoActualDepartureMblWise`: Similar to the above, but aggregated MBL-wise (`fileno`, `mblno`).
        - `BookingDatetoActualDepartureStackedBar`: Configures a stacked bar chart view, categorizing day differences into 'Less than 1 week', '1 - 2 weeks', etc., and uses `getFilterQueryByDisplayValue` for dynamic grouping and ordering.
        - `BookingDatetoActualDepartureMblWiseStackedBar`: Extends the stacked bar functionality for MBL-wise aggregation.
    - The SQL queries consistently filter by `CompanyName` and `departure_date` range and handle `NULL` or '0001-01-01 00:00:00 BC' date values.

`c:\Users\ridap\OneDrive\Documents\T360_Api\t360-backend\src\controllers\getCustomerOptions.ts`
- **Timestamps**: Multiple changes between 1/2/2026, 3:58:49 PM and 1/2/2026, 4:31:23 PM.
- **Key Changes**:
    - **Initial State (1/2/2026, 3:58:49 PM)**:
        - The `getAllCustomerOptions` function was refactored significantly. A large block of commented-out code for handling `AGENT` and `CUSTOMER` roles, including pagination logic, was removed.
        - The active `getAllCustomerOptions` now retrieves distinct `account_name` from `mtr_tracking_data`, filters by an optional `search` query parameter using `ILIKE`, and limits results to 10.
        - Introduced `deleteCustomerOption` function, which initially expected `account_name` from `req.body` to delete records from `mtr_tracking_data`.
    - **Subsequent Updates (1/2/2026, 4:17:54 PM to 1/2/2026, 4:31:23 PM)**:
        - The `deleteCustomerOption` function was modified to use `customer_id` from `req.params` instead of `account_name` from `req.body` for deletion.
        - The database table targeted for deletion also changed from `mtr_tracking_data` to `Account_Master_Customer_MAP` by the final timestamp (1/2/2026, 4:31:23 PM).
        - Console logs for `customer_id` and `req.params` were added for debugging purposes in the `deleteCustomerOption` function.

`c:\Users\ridap\OneDrive\Documents\T360_Api\t360-backend\src\routes\getCustomerOptionsRoute.ts`
- **Timestamps**: Multiple changes between 1/2/2026, 3:59:33 PM and 1/2/2026, 4:28:07 PM.
- **Key Changes**:
    - **Initial State (1/2/2026, 3:59:33 PM)**:
        - Defined routes: `router.get("/", getAllCustomerOptions)` and `router.delete("/", deleteCustomerOption)`.
    - **Subsequent Updates (1/2/2026, 3:59:43 PM to 1/2/2026, 4:28:07 PM)**:
        - The `delete` route path was updated from `/` to `/delete` (1/2/2026, 3:59:43 PM).
        - Later, it was further modified to include a dynamic `customer_id` parameter: `/delete/:customer_id` (1/2/2026, 4:18:20 PM), which remained consistent through the final change.

`c:\Users\ridap\OneDrive\Documents\T360_Api\t360-backend\src\controllers\code.controller.ts`
- **Timestamps**: Multiple changes between 1/2/2026, 4:12:38 PM and 1/5/2026, 5:40:32 PM.
- **Key Changes**:
    - **`getAllCustomer` Function**:
        - **Initial State (1/2/2026, 4:12:38 PM)**: Fetches customer data along with associated shipper mappings, documents, and customer mappings based on `acode`. The `customer_map` column was not explicitly selected in the main `dataQuery`.
        - **1/5/2026, 12:41:04 PM**: Modified the `dataQuery` to explicitly select the `customer_map` column from `PO_AccountMaster_Customer_Master`.
        - **1/5/2026, 4:47:49 PM**: Introduced a `normalizePgArray` helper function to properly parse PostgreSQL array strings (e.g., `{A,B,C}`) into JavaScript arrays. The `customer_map` field in the `customerData` object within `jsonArray` mapping was updated to use this `normalizePgArray` function.
        - **1/5/2026, 4:51:59 PM**: Reverted `normalizePgArray` for `customer_map` in the `customerData` object back to `chkStr(row.customer_map)` but explicitly set `customer_map` to `Array.isArray(row.customer_map) ? row.customer_map : []` in the final return object for `jsonArray`. This suggests a shift in how `customer_map` is expected from the database or handled for output.
        - **1/5/2026, 5:00:11 PM**: The `normalizePgArray` function was commented out, indicating it's no longer used for processing `customer_map` in `getAllCustomer`. The `customer_mapping` field in the returned object was explicitly set to an empty array if `row.customer_map` is not an array. The `customerQuery` and related `customerMapData` logic were commented out from `getAllCustomer` (1/5/2026, 5:40:32 PM).
        - **1/5/2026, 5:39:13 PM**: The `parseCustomerMapping` function (which was originally created for `createCustomer`) was moved to be a global/module-level helper function, placed *before* `getAllCustomer`. This indicates it might be intended for broader use or better organization.
    - **`createCustomer` Function**:
        - **Initial State (1/2/2026, 4:12:38 PM)**: Handles creation/modification of customer records, including associated types and shipper mappings. It sanitizes `cname`, checks for existing customers, and performs database operations within a transaction. The `customer_mapping` was passed directly as the 22nd value in `insertCustomerValues`.
        - **1/5/2026, 10:23:34 AM**: The `insertCustomerQuery` was updated to include `customer_map` as a column for insertion (`$23`), and the `insertCustomerValues` array was extended to include `customer_mapping` (which was a raw string at this point).
        - **1/5/2026, 11:15:27 AM**: `customer_mapping` from `req.body` was parsed using `JSON.parse` into `customerArray` before insertion. This suggests `customer_mapping` is expected as a JSON string representing an array.
        - **1/5/2026, 11:17:44 AM**: Introduced a new `parseCustomerMapping` helper function to robustly handle parsing `customer_mapping` from the request body, including cases where it might be an array (due to duplicate form fields) or a single string. It tries to parse JSON and ensures an array is returned. The `customerArray` now uses this helper.
        - **1/5/2026, 11:22:13 AM**: Corrected the call to `parseCustomerMapping` to use `req.body.customer_mapping` instead of just `customer_mapping` variable.
        - **1/5/2026, 5:39:13 PM**: The `parseCustomerMapping` function was moved to a higher scope, before `getAllCustomer`.
    - **General Patterns/Recurring Elements**:
        - Frequent use of `query` for database interactions (PostgreSQL).
        - Consistent logging (`logger.info`, `console.log`) for debugging request body, data, and SQL queries.
        - `chkStr` utility function is widely used to ensure string values, likely to prevent `null` or `undefined` from appearing in the output.
        - Error handling with `try...catch` blocks and returning 500 status for internal server errors.
        - Customer-related data management (fetching, creating, updating) across multiple tables (`PO_AccountMaster_Customer_Master`, `agent_po_account_master_type`, `Account_Master_Shipper_MAP`, `document_upload_details`, `Account_Master_Customer_MAP`).
        - Repeated handling of `acode` generation/retrieval and `cname` sanitization in the `createCustomer` function.