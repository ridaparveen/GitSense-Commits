# Activity Summary for 1/22/2026

## 11:40:36 AM
Over the period from January 19, 2026, to January 21, 2026, development activity focused on enhancing analytics and reporting capabilities within the T360-V2 backend. Key updates involved refining SQL query generation for various reports, introducing new Air-related analytics, and improving the framework for managing and displaying these reports.

**File-Specific Updates:**

*   **`c:\Users\ridap\OneDrive\Documents\T360-V2\t360-backend-v2\src\common\util\booking.query.ts`**
    *   **Timestamp: 1/19/2026, 6:44:58 PM**
        This file defines `bookingQueryBuilder`, a core function for constructing SQL queries related to booking and departure analytics. It supports various report types such as "Booking Date to Actual Departure" (including MBL-wise and Stacked Bar variants), dynamically setting `customizer` properties (e.g., `dateRange`, `calType`, `dateColumns`, `chartType`). Queries consistently join `mtr_tracking_data` and `agent_booking_entry`, applying filters for company name and date ranges, and calculating day differences.
    *   *Multiple subsequent timestamps (1/19/2026, 7:29:32 PM; 1/21/2026, 4:37:17 PM; 1/21/2026, 4:42:49 PM; 1/21/2026, 4:45:12 PM; 1/21/2026, 4:46:26 PM; 1/21/2026, 4:48:08 PM; 1/21/2026, 7:44:20 PM; 1/21/2026, 7:46:44 PM)* show no semantic code changes, suggesting frequent saves or minor, non-committal modifications. The core functionality remained stable during this period.

*   **`c:\Users\ridap\OneDrive\Documents\T360-V2\t360-backend-v2\src\services\analytics\cbmService.ts`**
    *   **Timestamp: 1/20/2026, 5:28:09 PM**
        The `getCBMReports` function was updated to generate SQL queries for CBM (Cubic Meter) reports. It dynamically builds queries based on `group_by_column` (e.g., `country_of_origin`, `country_of_discharge`) and includes logic to join with `portmaster` for country-based aggregation. It also handles general CBM aggregation, including replacing specific port names and applying company and date filters. The function uses `getColumnsByCategory` to define which columns are relevant for the report, ignoring a comprehensive list of irrelevant fields and ensuring `cbm` and `departure_date` are included.
    *   **Timestamp: 1/20/2026, 5:28:35 PM**
        A minor debugging `console.log` statement was added to print the generated SQL `mainQuery`.

*   **`c:\Users\ridap\OneDrive\Documents\T360-V2\t360-backend-v2\src\common\util\export.query.ts`**
    *   **Timestamp: 1/21/2026, 11:16:16 AM**
        This file handles the generation of SQL queries for exporting data based on various report names. It includes a `getMonthValue` helper for date parsing and the `bookingQuery` function which constructs specific SQL statements for "Booking Date to Actual Departure", "Booking Date to Estimated Departure", and "Booking Date to POD Arrival", along with their MBL-wise and Stacked Bar variations. The queries feature conditional logic for filtering by month, week, or quarter when `stackedExport` is enabled, and group results by day differences for stacked bar charts. Notably, the "Booking Date to POD Arrival (Stacked Bar)" query added a filter `m.t49_vessel_actualdeparted_date IS NOT NULL`.
    *   *Multiple subsequent timestamps (1/21/2026, 11:22:42 AM; 1/21/2026, 1:01:30 PM; 1/21/2026, 3:26:28 PM; 1/21/2026, 4:40:17 PM; 1/21/2026, 4:40:50 PM; 1/21/2026, 6:16:15 PM; 1/21/2026, 6:17:07 PM; 1/21/2026, 7:37:23 PM; 1/21/2026, 7:40:24 PM)* indicate no semantic code changes.

*   **`c:\Users\ridap\OneDrive\Documents\T360-V2\t360-backend-v2\src\models\User.ts`**
    *   **Timestamp: 1/21/2026, 1:02:38 PM**
        The `UserType` interface was expanded to include `CompanyName` (type `any`) and an optional `location` field. The `UserRole` enum was updated to include `ADMIN_V2`. Validation and object creation utilities (`parseUser`, `__new__`, `test`) were retained.

*   **`c:\Users\ridap\.dbclient\storage\1747201553765@@127.0.0.1@5432@Rida_Database@public\public.sql`**
    *   **Timestamp: 1/21/2026, 1:14:04 PM**
        This SQL log shows various `SELECT` statements for fetching data from `dashboards`, `metrics`, and `mtr_tracking_data` tables. A significant entry is an `INSERT` statement for a new metric: `('Total Shipments Air Wise','/analytics/Tables/tableData?type=TotalShipmentAirWise','Air Metrics','Air_Wise')`. This indicates the introduction of a new "Air Wise" analytics category. The log also contains complex `WITH` clause queries calculating average transit times and performance metrics for specific companies, grouped by country of origin and voyage.

*   **`c:\Users\ridap\OneDrive\Documents\T360-V2\t360-backend-v2\src\services\analytics\coreMetricService.ts`**
    *   **Timestamp: 1/21/2026, 1:16:07 PM**
        The analytics service was updated to support new reporting categories. The `getMetricList` function was enhanced to categorize metrics into `airWiseGroups` in addition to existing `containerWiseGroups` and `mblWiseGroups`, using the `filter_by` attribute. Functions for managing dashboard endpoints (`dashboardEndPointList`), saving report sequences (`saveSequence`), and saving metric widget sizes (`saveSize`) were also present and likely maintained/used in this version.

*   **`c:\Users\ridap\OneDrive\Documents\T360-V2\t360-backend-v2\src\common\constants\Paths.ts`**
    *   **Timestamp: 1/21/2026, 1:33:09 PM**
        New API endpoints were defined under the `/analytics` base path, including `/dashboardEndPoints`, `/metricsList`, `/excelExport`, `/save-sequence`, `/save_size`, `/cbm`, `/kgs`, `/teu`, `/containers`, `/transit`, and `/Tables/tableData`. A new base path for `/co2emission` with a `/get` endpoint was also added, indicating expansion of analytics features.

*   **`c:\Users\ridap\OneDrive\Documents\T360-V2\t360-backend-v2\src\common\util\air.query.ts`**
    *   **Timestamp: 1/21/2026, 1:33:53 PM**
        Initial commit of `airQueryBuilder`, which strangely included chassis-related query logic for "Averagechassisuseddays" and "ChassisPUdateVsFinalDeliveryDate" reports, despite the file name suggesting air-specific queries.
    *   **Timestamp: 1/21/2026, 2:15:39 PM**
        Added core logic for `type === "TotalShipmentAirWise"`, which queries `mtr_air_data` to count distinct `awb_number`s. This change correctly started to implement air freight specific analytics. The existing chassis-related reports were still present.
    *   **Timestamp: 1/21/2026, 2:16:49 PM**
        Refined `TotalShipmentAirWise` logic by explicitly setting `customizer.booking` and `customizer.mblwise` to `false`. Expanded the `ignore` list for `getColumnsByCategory` with numerous tracking-related columns.
    *   *Intermediate timestamps (1/21/2026, 2:16:57 PM to 1/21/2026, 2:55:57 PM)* show debugging-related `console.log` additions, temporary commenting out of data aggregation, and adjustments to `reportName` decoding.
    *   **Timestamp: 1/21/2026, 2:57:41 PM**
        **Major refactoring**: All chassis-related query logic was removed, making `airQueryBuilder` solely focused on "TotalShipmentAirWise". The data aggregation (`analysticsData.rows.push`) was re-enabled, and the function was updated to return `analysticsData` directly, aligning its behavior with `generalQueryBuilder`. Robust handling for division by zero in percentage calculation was introduced. The `ignore` list for `getColumnsByCategory` was significantly expanded to exclude most common tracking data columns.
    *   **Timestamp: 1/21/2026, 3:18:27 PM & 1/21/2026, 3:20:38 PM**
        Further expanded the `ignore` list in `getColumnsByCategory` to include almost all date-related and shipment detail columns, ensuring a very focused selection for air reports.
    *   **Timestamp: 1/21/2026, 3:48:13 PM & 1/21/2026, 3:55:06 PM**
        An anomaly appeared with a duplicated `if (type === "TotalShipmentAirWise")` block, where the second block contained a CBM calculation query (likely intended for a different report type, but incorrectly triggered by the same `type`). This suggests an incomplete or mismanaged addition of another air report functionality.

*   **`c:\Users\ridap\OneDrive\Documents\T360-V2\t360-backend-v2\src\services\analytics\tableService.ts`**
    *   **Timestamp: 1/21/2026, 1:35:42 PM**
        This file's `getTableDataReports` function acts as a central dispatcher for analytics reports. It calls various `*QueryBuilder` functions (chassis, booking, container, departure, general) based on the `type` parameter from the request. It fetches user and company information using `getUserObject`.
    *   **Timestamp: 1/21/2026, 1:38:12 PM**
        `airQueryBuilder` was imported, and a new `else if` block was added. Initially, this block incorrectly routed `TotalShipmentsMblWise` to `airQueryBuilder`, creating a conflict.
    *   **Timestamp: 1/21/2026, 2:07:22 PM**
        The `else if` condition was corrected to `type === "TotalShipmentAirWise"`, properly routing air shipment requests to the `airQueryBuilder`.
    *   **Timestamp: 1/21/2026, 3:09:20 PM**
        No further semantic changes were observed in this file.

*   **`c:\Users\ridap\OneDrive\Documents\T360-V2\t360-backend-v2\src\utils\analytics.ts`**
    *   **Timestamp: 1/21/2026, 3:21:18 PM**
        This utility file provides several helper functions for analytics. `defaultDateRange` gives a default date range. `replaceValueInQuery` handles specific column value replacements. `getUserObject` retrieves user context. `getFilterQueryByDisplayValue` generates dynamic SQL clauses for grouping and ordering by month, week, or quarter. `getExcelSelectedColumns` defines which columns to select for Excel exports, with special handling for certain report types (e.g., "Cargo-Ready Date to ETD", "BL Release KPI"). `dateFilterOnExport` normalizes and filters date fields, setting invalid dates to `null` and formatting valid ones to 'MM/DD/YYYY'. A comprehensive `EXCEL_EXPORT_COLUMNS` array lists all available fields for export.
    *   **Timestamp: 1/21/2026, 3:23:52 PM**
        No semantic code changes were observed.

**Patterns and Recurring Elements:**

1.  **Modular Query Builders:** The system uses distinct `*QueryBuilder` functions (e.g., `bookingQueryBuilder`, `chassisQueryBuilder`, `airQueryBuilder`) to encapsulate SQL generation logic for different analytics categories.
2.  **Dynamic Customization:** A `customizer` object is consistently passed and modified to configure report display, including `dateRange`, `calType`, `dateColumns`, `booking` (flag for booking reports), `mblwise` (flag for MBL-wise reports), and `chartType`.
3.  **`getColumnsByCategory` Usage:** The `getColumnsByCategory` utility is widely used to dynamically fetch a curated list of columns for each report, often employing extensive `ignore` lists to filter out irrelevant fields and `must` lists for essential ones.
4.  **Company and Date Range Filtering:** Nearly all SQL queries include common `WHERE` clauses to filter data by a list of company names (`LOWER(account_name) IN (${companyList})`) and a date range for `departure_date`.
5.  **SQL `DISTINCT ON` and Aggregation:** Many queries use `DISTINCT ON` clauses (often on combinations of `voyage`, `contno`, `t49_cont_type`) and aggregate functions (`SUM`, `AVG`, `COUNT`) to produce summarized metrics, frequently calculating day differences between dates.
6.  **Percentage Calculation:** A common final step in many queries involves calculating a percentage value for each entity relative to a `max_total` or `max_value`, ensuring proper handling of zero denominators.
7.  **Date Handling and Formatting:** The `analytics.ts` utility demonstrates a clear pattern for validating and formatting date fields, specifically addressing database-specific "empty" date values like '0001-01-01 00:00:00 BC' and formatting valid dates for consistent presentation.
8.  **Debugging Practices:** The presence and subsequent removal/modification of numerous `console.log` statements in `air.query.ts` indicate an active debugging process during the integration of new analytics features.

## 1:40:25 PM
The changes observed across the provided logs indicate active development within the analytics module of the `t360-frontend-v2` project, focusing on custom view management, dashboard display, and state consistency.

**File-Specific Updates:**

*   **`c:\Users\ridap\OneDrive\Documents\T360-V2\t360-frontend-v2\src\components\screen\analytics\custom-view\ViewContainer.tsx`**
    *   **1/20/2026, 1:49:22 PM:** The component initially supported "Container Wise" and "MBL Wise" views, handling state and data initialization for these two categories.
    *   **1/21/2026, 12:55:46 PM - 1/21/2026, 1:21:49 PM:** A new "AIR Wise" view type was progressively integrated.
        *   The `selectedTab` state was updated to include `"airWise"` in its possible types.
        *   UI rendering logic was refactored from a ternary operator to multiple conditional `&&` statements to explicitly allow for rendering `TreeViewContainer` based on `selectedTab` for "containerWise", "mblWise", and "airWise" data.
        *   The `initializeCheckedMetrics` function was updated to iterate over `["containerWise", "mblWise", "airWise"]`, ensuring metrics for the new "AIR Wise" category are initialized.
        *   Finally, the `tabData` array, which defines the options for the `RadioNav` component, was updated to include `{ label: "AIR Wise", value: "airWise" }`, making the new view type selectable in the UI.

*   **`c:\Users\ridap\OneDrive\Documents\T360-V2\t360-frontend-v2\src\components\screen\analytics\AnalyticsToolbar.tsx`**
    *   **1/20/2026, 1:50:39 PM:** The toolbar displayed a "Manage View" button based on `selectedDashobard` not being "Default" or `"_Default_"`. The `ChipsTabView` component mapped `"_Default_"` to "Default" for display.
    *   **1/20/2026, 6:38:07 PM - 1/20/2026, 6:38:27 PM:** The condition for showing the "Manage View" button was adjusted to consistently check `toolState?.selectedDashobard !== "Default"` (effectively `selectedDashobard !== "Default" && selectedDashobard !== "Default"`), removing the `"_Default_"` identifier. Similarly, the `ChipsTabView` mapping was simplified to `item === "Default" ? "Default" : item`. These changes reflect a standardization of the "Default" dashboard naming convention.
    *   **1/21/2026, 1:19:45 PM:** A `console.log` statement for `showDrawer` was added.

*   **`c:\Users\ridap\OneDrive\Documents\T360-V2\t360-frontend-v2\src\store\fretures\analytics-slice.ts`**
    *   **1/20/2026, 1:56:23 PM:** The initial state for `selectedDashobard` was `"_Default_"`, and the `setDashboard` reducer included logic to handle `"_Default_"` values.
    *   **1/20/2026, 1:57:02 PM - 1/20/2026, 6:37:08 PM:** The `initialState.selectedDashobard` was changed to `"Default"`. Subsequent updates in the `setDashboard` reducer aligned the logic to use `"Default"` instead of `"_Default_"` when setting the `selectedDashobard` or populating the `dashboards` array.
    *   **1/20/2026, 6:39:02 PM:** The `setDashboard` reducer was fully updated to consistently use `"Default"` instead of `"_Default_"` in its conditional checks and state modifications, completing the standardization of the default dashboard identifier.

*   **`c:\Users\ridap\OneDrive\Documents\T360-V2\t360-frontend-v2\src\data\options\global.ts`**
    *   **1/20/2026, 6:41:28 PM:** This file primarily defines various application-wide options and constants, such as `SHIPMENT_STATUS`, `AIR_SHIPMENT_STATUS`, `REPORTS_STATUS`, `TEAM_MENBER_ROLE`, `DATE_FILTER_OPTIONS`, etc. There is only one entry for this file, indicating it was defined or updated at this point.

*   **`c:\Users\ridap\OneDrive\Documents\T360-V2\t360-frontend-v2\src\config\analytics.ts`**
    *   **1/21/2026, 2:31:38 PM - 1/22/2026, 12:21:27 PM:** This file defines configurations specific to analytics, including `DEFAULT_ANALYTICS_ENDPOINTS`, `EXCEL_EXPORT_COLUMNS` for data export, and `ANALYTICS_REPORT_HEADER` which specifies headers for various reports. No functional changes were observed between the two timestamps for this file, suggesting minor saves or non-functional updates.

**Timestamps of Significant Changes:**

*   **1/20/2026 (afternoon):** Initial codebase for analytics components (`ViewContainer.tsx`, `AnalyticsToolbar.tsx`, `analytics-slice.ts`) shows a working state with "Container Wise" and "MBL Wise" views, and `"_Default_"` as the default dashboard identifier.
*   **1/20/2026 (evening):** A rapid series of updates across `analytics-slice.ts` and `AnalyticsToolbar.tsx` (between 1:57:02 PM and 6:39:02 PM) to standardize the "Default" dashboard naming convention, migrating from `"_Default_"` to `"Default"`.
*   **1/21/2026 (morning to early afternoon):** A phased introduction of the "AIR Wise" view type in `ViewContainer.tsx` (between 12:55:46 PM and 1:21:49 PM), including state updates, UI adjustments, and data initialization logic.

**Patterns or Recurring Elements:**

*   **Default Dashboard Standardization:** There's a clear pattern of standardizing the naming convention for the "Default" dashboard from `"_Default_"` to `"Default"` across the Redux slice and UI components (`analytics-slice.ts`, `AnalyticsToolbar.tsx`). This ensures consistency in identifying the default view.
*   **Modular Feature Development:** The introduction of the "AIR Wise" view in `ViewContainer.tsx` demonstrates a modular approach, where changes are introduced step-by-step: first updating the underlying data structures/types, then the rendering logic, and finally the user-facing selection options.
*   **Analytics Feature Focus:** All changes are concentrated within files related to the analytics dashboard, suggesting ongoing enhancements and new feature additions to the analytics capabilities of the application.
*   **Redux for State Management:** The `analytics-slice.ts` file highlights the use of Redux Toolkit for managing the complex state of the analytics dashboard, including filters, selected dashboards, and metrics.
*   **Configuration-driven UI:** The `global.ts` and `analytics.ts` files serve as central configuration points, defining static options and report structures that drive parts of the analytics UI and data processing.

## 1:40:30 PM
Key information from these changes:

**File-Specific Updates and Significant Timestamps:**

*   **`c:\Users\ridap\OneDrive\Documents\T360-V2\t360-backend-v2\src\common\util\booking.query.ts`**
    *   **Timestamp Range:** `1/19/2026, 6:44:58 PM` to `1/21/2026, 7:46:44 PM`
    *   This file, `bookingQueryBuilder`, is responsible for generating SQL queries for various booking-related analytics reports. The provided log entries for this file show continuous, incremental development or refinement of existing queries. While specific functional changes across these many timestamps are not explicitly detailed in the provided log, the consistent presence indicates ongoing work on reports like "Booking Date to Actual Departure" (both container and MBL-wise, including stacked bar variations). The `customizer.selectedColumns` logic is consistently updated with ignored and required date columns.

*   **`c:\Users\ridap\OneDrive\Documents\T360-V2\t360-backend-v2\src\services\analytics\cbmService.ts`**
    *   **Timestamp Range:** `1/20/2026, 5:28:09 PM` to `1/21/2026, 4:33:08 PM`
    *   This service handles CBM (Cubic Meter) reports. A notable change at `1/20/2026, 5:28:35 PM` involved adding a `console.log` statement for debugging the `mainQuery`. The service constructs dynamic SQL queries based on `group_by_column` (e.g., `country_of_origin`, `pol`, `pod`) and `mblwise` conditions, calculating total CBM and its percentage. The extensive `ignore` list for `getColumnsByCategory` indicates a move towards precise column selection for CBM reports.

*   **`c:\Users\ridap\OneDrive\Documents\T360-V2\t360-backend-v2\src\common\util\export.query.ts`**
    *   **Timestamp Range:** `1/21/2026, 11:16:16 AM` to `1/22/2026, 1:11:34 PM`
    *   This file defines `bookingQuery` to generate SQL query fragments specifically for data export based on `reportName`. A `getMonthValue` helper function was introduced at `1/21/2026, 11:16:16 AM` for date-based filtering. The file consistently includes detailed SQL WHERE clauses for various booking reports, often incorporating dynamic date range, company, and stacked bar group filtering, indicating a robust export mechanism. Many of the timestamps show identical code, suggesting frequent saves without significant functional changes captured in the provided snippets. A specific filter `m.t49_vessel_actualdeparted_date IS NOT NULL` was added to the "Booking Date to POD Arrival (Stacked Bar)" query around `1/21/2026, 11:16:16 AM`.

*   **`c:\Users\ridap\OneDrive\Documents\T360-V2\t360-backend-v2\src\models\User.ts`**
    *   **Timestamp:** `1/21/2026, 1:02:38 PM`
    *   The `UserType` interface was updated to include `CompanyName: any;` and define `location` as a string. This change likely reflects an adjustment in how user company information is structured or handled within the application.

*   **`c:\Users\ridap\.dbclient\storage\1747201553765@@127.0.0.1@5432@Rida_Database@public\public.sql`**
    *   **Timestamp:** `1/21/2026, 1:14:04 PM`
    *   This is a database script showcasing various SQL operations, including selecting from `dashboards` and `metrics`, inserting a new metric (`Total Shipments Air Wise`), and several complex analytical queries (using `WITH` clauses) calculating average day differences and percentages for different companies and date ranges on `mtr_tracking_data` and `portmaster` tables. This reflects active database-level testing and development of analytics queries.

*   **`c:\Users\ridap\OneDrive\Documents\T360-V2\t360-backend-v2\src\services\analytics\coreMetricService.ts`**
    *   **Timestamp:** `1/21/2026, 1:16:07 PM`
    *   This service manages dashboard metric endpoints, listing, and user-specific customizations. It retrieves and sorts metrics for a dashboard, categorizes metrics into `Container_Wise`, `MBL_Wise`, and `Air_Wise` groups, and provides functionality to save the display sequence and size (row/column span) of dashboard items. The inclusion of `airWiseGroups` is a new categorization.

*   **`c:\Users\ridap\OneDrive\Documents\T360-V2\t360-backend-v2\src\common\constants\Paths.ts`**
    *   **Timestamp:** `1/21/2026, 1:33:09 PM`
    *   A new base path `/co2emission` with a `/get` endpoint was added, indicating the introduction of CO2 emission reporting features.

*   **`c:\Users\ridap\OneDrive\Documents\T360-V2\t360-backend-v2\src\common\util\air.query.ts`**
    *   **Timestamp Range:** `1/21/2026, 1:33:53 PM` to `1/22/2026, 1:11:26 PM`
    *   This file undergoes significant evolution, initially containing chassis-related queries that seem misplaced for an "air.query" file (`1/21/2026, 1:33:53 PM`).
    *   A major functional shift occurred around `1/21/2026, 2:15:39 PM` with the introduction of `TotalShipmentAirWise` report logic, specifically querying the `mtr_air_data` table.
    *   Between `1/21/2026, 2:21:05 PM` and `1/21/2026, 3:20:38 PM`, the function name was stabilized to `airQueryBuilder`, and the `ignore` list for `getColumnsByCategory` was significantly expanded to filter out sea freight-specific columns when dealing with air data.
    *   A temporary error involving duplicated code and incorrect CBM logic (likely copied from `cbmService.ts` by mistake) appeared at `1/21/2026, 3:48:13 PM` and `1/21/2026, 3:55:06 PM`, showing active refactoring or debugging.
    *   A significant functional addition at `1/22/2026, 12:14:27 PM` was the `TotalKgsByLaneAirWise` report, calculating total KGS by lane for air shipments using `mtr_air_data`. Further refinements in this logic (e.g., handling null/zero KGS, using dynamic company/date filters) were made up to `1/22/2026, 1:11:26 PM`.

*   **`c:\Users\ridap\OneDrive\Documents\T360-V2\t360-backend-v2\src\services\analytics\tableService.ts`**
    *   **Timestamp Range:** `1/21/2026, 1:35:42 PM` to `1/22/2026, 12:28:29 PM`
    *   This service acts as a central dispatcher for analytics reports. It expanded its conditional logic to include air-specific reports.
    *   At `1/21/2026, 1:38:12 PM`, `airQueryBuilder` was imported, and an `else if` condition was added to use it, initially with an incorrect `type` (`"TotalShipmentsMblWise"`) which was corrected to `"TotalShipmentAirWise"` at `1/21/2026, 2:07:22 PM`.
    *   The `airQueryBuilder` call was further updated at `1/22/2026, 12:17:47 PM` and `1/22/2026, 12:28:29 PM` to handle both `"TotalShipmentAirWise"` and `"TotalKgsByLaneAirWise"`, reflecting the new air freight report capabilities.

*   **`c:\Users\ridap\OneDrive\Documents\T360-V2\t360-backend-v2\src\utils\analytics.ts`**
    *   **Timestamp Range:** `1/21/2026, 3:21:18 PM` to `1/22/2026, 12:38:19 PM`
    *   The `dateFilterOnExport` utility function's `dateKeys` array was significantly expanded at `1/21/2026, 3:21:18 PM` to include a comprehensive list of date-related column names, ensuring proper date validation and formatting for export functionality across a wider range of data fields. No further significant changes were noted in subsequent timestamps.

**Patterns and Recurring Elements:**

1.  **Dynamic SQL Generation:** A consistent pattern across `booking.query.ts`, `cbmService.ts`, `air.query.ts`, and `export.query.ts` is the dynamic construction of complex SQL queries based on user inputs (company, date range, report type, display options).
2.  **`getColumnsByCategory` for Column Management:** This utility is frequently used to define which columns should be ignored or explicitly included for different report types, indicating a centralized and flexible way to manage data presentation.
3.  **Company-Specific Filtering:** All analytical queries consistently filter data based on a dynamic `companyList` derived from the `CompanyName` parameter, supporting multi-company data views.
4.  **Date Range Filtering:** Dates (`fromDate`, `toDate`) are critical parameters for almost all reports, consistently applied using `departure_date >= '${fromDate}'::timestamp AND departure_date < '${toDate}'::timestamp + INTERVAL '1 day'`.
5.  **Analytics Service Dispatcher:** `tableService.ts` acts as a central hub, dispatching requests to specialized query builders (e.g., `chassisQueryBuilder`, `bookingQueryBuilder`, `airQueryBuilder`) based on the `type` of the report requested.
6.  **Introduction of Air Freight Analytics:** A significant new area of development is the integration of air freight data. This is evident through the creation and refinement of `air.query.ts` with reports like "Total Shipments Air Wise" and "Total Kgs By Lane Air Wise", the addition of `Air_Wise` categories in `coreMetricService.ts`, and the `/co2emission` endpoint in `Paths.ts`. This suggests an expansion of the platform's analytical scope.
7.  **Dashboard Customization Features:** `coreMetricService.ts` highlights features allowing users to customize their dashboard layout and content order, indicating user-centric UI flexibility.
8.  **Debugging Practices:** Numerous `console.log` and `logger.info` statements appear and are modified throughout the logs, suggesting an iterative development process with frequent debugging.

## 2:40:20 PM
Across January 21st and 22nd, 2026, the codebase saw a concentrated development effort primarily focused on expanding and refining analytics and reporting features, with a significant push towards air freight logistics.

**File-specific Updates:**

*   **`src\models\User.ts` (1/21/2026, 1:02:38 PM):** The `UserType` interface was updated to include `CompanyName` and an optional `location`, and the `parseUser` function's validation was adjusted to include `companyname`. This expands the user model to support more detailed company and location-based user data.
*   **`src\.dbclient\storage\...\public.sql` (1/21/2026, 1:14:04 PM):** This log entry indicates database interaction, specifically showing various `SELECT` and `INSERT` statements. Key SQL queries retrieve data from `dashboards`, `metrics`, `mtr_tracking_data`, and `agent_booking_entry` tables, often filtering by `account_name` and `departure_date`. Notably, complex `WITH` clause queries calculate average transit times. A new metric, 'Total Shipments Air Wise', was inserted into the `metrics` table.
*   **`src\services\analytics\coreMetricService.ts` (1/21/2026, 1:16:07 PM):** This service was enhanced to support grouping metrics by `filter_by` into 'Container\_Wise', 'MBL\_Wise', and a newly introduced 'Air\_Wise' category within the `getMetricList` function. Functions like `dashboardEndPoints`, `saveSequence`, and `saveSize` were updated or introduced to manage the display, order, and size of dashboard metrics based on user configurations.
*   **`src\common\constants\Paths.ts` (1/21/2026, 1:33:09 PM):** New API routes under the `/analytics` base path were added, including endpoints for `DashboardEndPoints`, `MetricsList`, `GetExcelReport`, `SaveSequence`, `SaveSize`, and various data types like `GetCbm`, `GetKgs`, `GetTeu`, `GetContainers`, `GetTransit`, and `GetTablesData`. This significantly expands the API surface for analytics.
*   **`src\common\util\air.query.ts` (Numerous changes between 1/21/2026, 1:33:53 PM and 1/22/2026, 2:36:43 PM):** This file underwent extensive modifications. Initially, it included queries for ocean-related reports (`Averagechassisuseddays`, `ChassisPUdateVsFinalDeliveryDate`, `ChassisPUdateVsFinalDeliveryDateMblWise`) but was refocused to specifically handle air freight analytics. Key updates include:
    *   Introduction and refinement of reports like `TotalShipmentAirWise`, `TotalKgsByLaneAirWise`, and `TotalCbmByLaneAirWise`.
    *   These air-specific queries leverage the `mtr_air_data` table, counting distinct `awb_number` for shipment totals, and summing `gross_weight` (kgs) or `tot_cbm` (cbm) for lane-wise reports.
    *   Extensive updates to the `ignore` and `must` lists for `getColumnsByCategory` to ensure only air-relevant columns are considered.
    *   Improved handling of origin/destination port names using `COALESCE` and `NULLIF(TRIM(..), '')` for robustness.
    *   Transition from hardcoded date ranges in some queries to dynamic `fromDate` and `toDate` parameters.
    *   The function signature and variable names (`airQueryBuilder` vs `airmainQueryBuilder`) were adjusted during this period.
*   **`src\services\analytics\tableService.ts` (Numerous changes between 1/21/2026, 1:35:42 PM and 1/22/2026, 2:06:39 PM):** This central service integrates the various query builders. It was updated to include the newly developed air freight reports (`TotalShipmentAirWise`, `TotalKgsByLaneAirWise`, `TotalCbmByLaneAirWise`) by calling the `airQueryBuilder` when the corresponding report `type` is requested. This indicates the full integration of air freight analytics into the main reporting workflow.
*   **`src\services\analytics\cbmService.ts` (1/21/2026, 4:33:08 PM):** The CBM reporting service was refined with an updated `ignore` list for `getColumnsByCategory`, and improved `mblwiseCondition` logic for more accurate Master Bill of Lading-wise grouping. It also introduced a `replaceValueInQuery` utility to standardize port names (e.g., 'LONG BEACH' to 'LOS ANGELES').
*   **`src\common\util\booking.query.ts` (Numerous changes between 1/21/2026, 4:37:17 PM and 1/21/2026, 4:48:08 PM):** This file was updated to further refine SQL query generation for various booking-related reports. It includes an extensive `ignore` list for `getColumnsByCategory` and a `must` list for essential booking columns. Queries for calculating average days and generating stacked bar charts were made more robust with detailed logic for grouping by time periods and categorical ranges (e.g., "Less than 1 week").
*   **`src\utils\analytics.ts` (Numerous changes between 1/21/2026, 3:21:18 PM and 1/22/2026, 2:17:46 PM):** This utility file provides common functions for analytics. Key changes include the `getExcelSelectedColumns` function for dynamically selecting columns for export based on report name and booking context, and the `dateFilterOnExport` function for cleaning and formatting date strings in export data. The `EXCEL_EXPORT_COLUMNS` array was extended with a comprehensive list of tracking data fields, indicating a rich dataset for reporting.

**Patterns and Recurring Elements:**

*   **Analytics Expansion:** The changes consistently show a pattern of enhancing and expanding analytics and reporting capabilities, particularly with the introduction of air freight-specific metrics.
*   **Modular Query Generation:** The system uses a modular approach with dedicated query builder files (`chassis.query`, `booking.query`, `container.query`, `departure.query`, `general.query`, `air.query`) to construct SQL queries based on report types.
*   **Dynamic Column Selection:** The `getColumnsByCategory` utility is widely used to dynamically select or ignore columns for different reports, indicating a flexible and configurable reporting framework.
*   **Date and Company Filtering:** Almost all queries include date range filtering and company-specific data access, typically using `LOWER(account_name) IN (${companyList})` or `customer_name IN (${companyList})`.
*   **Percentage-Based Metrics:** Many reports calculate values and their percentage contribution to a total or maximum, suggesting a focus on comparative analytics.
*   **Robust Date Handling:** Functions like `isValidDate` and `dateFilterOnExport` emphasize robust handling and formatting of date values in the database and for display.
*   **Consistent Error Handling:** Basic `try...catch` blocks are used for error handling across services and utility functions.
*   **Rapid Iteration:** The numerous, quick-succession changes within `air.query.ts` and `tableService.ts` on January 22nd indicate a rapid development cycle focused on implementing and integrating new air freight analytics.

## 2:40:32 PM
The log details recent developments focused on the analytics dashboard functionality.

**File-Specific Updates:**

*   **`c:\Users\ridap\OneDrive\Documents\T360-V2\t360-frontend-v2\src\components\screen\analytics\custom-view\ViewContainer.tsx`**
    *   **(January 20, 2026, 1:49:22 PM)**: This component provides the interface for creating and managing custom analytics views. It handles displaying and selecting metrics ("Container Wise" and "MBL Wise"), saving/updating/deleting dashboards, and integrating with Redux for state management. It also supports audit functionality.
    *   **(January 21, 2026, 12:55:46 PM - 1:21:49 PM)**: A significant series of changes introduced and progressively integrated an "AIR Wise" analytics view. Initially, the component's state type for `selectedTab` was updated to include `"airWise"`. This was followed by modifying the rendering logic to conditionally display `TreeViewContainer` for `"airWise"` metrics. Subsequently, the `initializeCheckedMetrics` function was updated to properly load previously selected "AIR Wise" metrics, and finally, "AIR Wise" was added as an explicit selectable option in the `RadioNav` tab data, making it fully available in the UI.

*   **`c:\Users\ridap\OneDrive\Documents\T360-V2\t360-frontend-v2\src\components\screen\analytics\AnalyticsToolbar.tsx`**
    *   **(January 20, 2026, 1:50:39 PM)**: This toolbar manages global analytics settings, including date filters, dashboard selection, and operation types (move/resize for charts). It also features PDF export functionality for the dashboard view.
    *   **(January 20, 2026, 6:38:27 PM)**: The logic for handling the "Default" dashboard was refined. References to `"_Default_"` (likely an older internal representation) were updated to `Default` for consistency in displaying the dashboard name and managing the "Manage View" button's visibility.

*   **`c:\Users\ridap\OneDrive\Documents\T360-V2\t360-frontend-v2\src\store\fretures\analytics-slice.ts`**
    *   **(January 20, 2026, 1:56:23 PM - 6:39:02 PM)**: This Redux slice manages the state for analytics, including selected dashboards, filters, and metrics. A series of changes here focused on standardizing the naming of the default dashboard. The `initialState.selectedDashobard` was updated from `"_Default_"` to `"Default"`. Correspondingly, the `setDashboard` reducer's logic for inserting and selecting dashboards was updated to consistently use `"Default"` instead of `"_Default_"`. Multiple identical saves of this file suggest minor, non-functional edits or re-saves during this period.

*   **`c:\Users\ridap\OneDrive\Documents\T360-V2\t360-frontend-v2\src\data\options\global.ts`**
    *   **(January 20, 2026, 6:41:28 PM)**: This file defines various static options and statuses used across the application, such as shipment statuses, booking statuses, date filter options (e.g., "Today", "This Week", "Custom"), period filters, and inventory types. No functional changes were recorded for this file within the provided log.

*   **`c:\Users\ridap\OneDrive\Documents\T360-V2\t360-frontend-v2\src\config\analytics.ts`**
    *   **(January 21, 2026, 2:31:38 PM - January 22, 2026, 2:09:42 PM)**: This configuration file defines default analytics endpoints, columns for Excel exports, and header structures for various analytics reports (CBM, TEU, KGS, Transit Time, Chassis metrics). Multiple identical entries indicate no functional changes were made to this file within the provided log timestamps.

**Patterns and Recurring Elements:**

*   **Default Dashboard Naming Consistency:** A clear pattern across `AnalyticsToolbar.tsx` and `analytics-slice.ts` involved refactoring the internal and display name of the "Default" dashboard from `"_Default_"` to `"Default"`, suggesting a standardization effort.
*   **Expansion of Analytics Features:** The phased integration of the "AIR Wise" view in `ViewContainer.tsx` highlights an ongoing development to expand the types of analytics available in the application.
*   **Redux for State Management:** The `analytics-slice.ts` consistently uses Redux Toolkit for managing the complex state of the analytics module.
*   **Timestamp Clustering:** Many changes occurred on January 20th and 21st, 2026, indicating active development during these days. The repeated identical entries for `analytics-slice.ts` and `analytics.ts` likely signify frequent saving or minor non-code changes.

## 3:40:14 PM
The provided log details changes across several TypeScript files related to an analytics backend, primarily focusing on metric reporting, dashboard configuration, and data querying.

**File-Specific Updates:**

*   **`c:\Users\ridap\OneDrive\Documents\T360-V2\t360-backend-v2\src\services\analytics\coreMetricService.ts`** (Timestamp: 1/21/2026, 1:16:07 PM):
    *   This file defines API endpoints for managing analytics dashboards and metrics.
    *   `dashboardEndPointList`: Fetches configured dashboard metrics and their display sizes for a specific user and menu title. It retrieves metrics from the `metrics` table based on a stored order in `dashboards`.
    *   `getMetricList`: Retrieves a list of available metrics, categorizing them into `Container_Wise`, `MBL_Wise`, and `Air_Wise` groups based on the `filter_by` column. It also includes logic to mark metrics as "checked" if they are part of a specified dashboard (`preload` functionality).
    *   `saveSequence`: Updates the order of metrics (`dashboard_metrics`) for a given user and menu title in the `dashboards` table. It includes special handling for a "Default" menu title, creating a new entry if it doesn't exist.
    *   `saveSize`: Stores the `rowSpan` and `columnSpan` for individual metrics within a dashboard configuration, allowing for customization of metric display sizes.
    *   All functions extensively use `logger.info` and `logger.error` for logging.

*   **`c:\Users\ridap\OneDrive\Documents\T360-V2\t360-backend-v2\src\common\constants\Paths.ts`** (Timestamp: 1/21/2026, 1:33:09 PM):
    *   This file defines various API paths for different modules of the application.
    *   A new `Analytics` section has been significantly expanded, adding several new endpoints:
        *   `DashboardEndPoints`, `MetricsList`, `GetExcelReport`, `SaveSequence`, `SaveSize`
        *   New metric-specific endpoints: `GetCbm`, `GetKgs`, `GetTeu`, `GetContainers`, `GetTransit`, `GetTablesData`.
    *   Minor additions include `Audit` and `CO2Emission` base paths.

*   **`c:\Users\ridap\OneDrive\Documents\T360-V2\t360-backend-v2\src\services\analytics\tableService.ts`** (Multiple timestamps: 1/21/2026, 1:35:42 PM to 1/22/2026, 2:06:39 PM):
    *   This file manages `getTableDataReports`, which is a central function for fetching various analytics reports based on the `type` parameter.
    *   **Initial change (1/21/2026, 1:35:42 PM):** The `getTableDataReports` function is introduced, using different query builders (`chassisQueryBuilder`, `bookingQueryBuilder`, `containerQueryBuilder`, `departureQueryBuilder`, `generalQueryBuilder`) based on the `type` of report requested. It includes date range handling, user object retrieval, and a `codeCustomization` flag for certain report types.
    *   **Subsequent changes (1/21/2026, 1:38:12 PM, 1/21/2026, 2:07:22 PM, 1/21/2026, 3:09:20 PM, 1/22/2026, 12:17:47 PM, 1/22/2026, 12:28:29 PM, 1/22/2026, 2:06:31 PM, 1/22/2026, 2:06:39 PM):**
        *   An `airQueryBuilder` import is added, indicating new functionality for air cargo analytics.
        *   New `else if` blocks are added to handle `TotalShipmentAirWise`, `TotalKgsByLaneAirWise`, and `TotalCbmByLaneAirWise` report types, routing them to the `airQueryBuilder`.
        *   The condition for `TotalKgsByLaneAirWise` was initially `TotalKgsByLaneAirWis` (typo), then corrected, and finally `TotalCbmByLaneAirWise` was added.

*   **`c:\Users\ridap\OneDrive\Documents\T360-V2\t360-backend-v2\src\common\util\air.query.ts`** (Multiple timestamps: 1/21/2026, 1:33:53 PM to 1/22/2026, 2:44:43 PM):
    *   This file, initially named `air.query.ts`, contained query building logic for "Averagechassisuseddays", "ChassisPUdateVsFinalDeliveryDate", and "ChassisPUdateVsFinalDeliveryDateMblWise". This seems to be a misplacement as these are chassis-related queries.
    *   **Significant Refactoring and New Air Cargo Queries (starting 1/21/2026, 2:15:39 PM):**
        *   The main export function name changes from `airQueryBuilder` to `airmainQueryBuilder` and then back to `airQueryBuilder` in subsequent commits.
        *   The interface `QueryBuilderI` is renamed to `mainQueryBuilderI`.
        *   **Introduction of `TotalShipmentAirWise`:** A new report type is added to count distinct `awb_number` from `mtr_air_data`. This includes setting `customizer.booking = false;` and `customizer.mblwise = false;`.
        *   The handling for "ChassisPUdateVsFinalDeliveryDate" and "ChassisPUdateVsFinalDeliveryDateMblWise" remains, but is likely to be moved or removed later given the file's intent.
        *   **Refinement of `TotalShipmentAirWise` logic:** The code evolves to fetch query results, calculate `maxTotal`, and then push `entity`, `value`, and `percentage` into `analysticsData.rows`. Console logs are frequently added for debugging.
        *   **Parameter `reportName` handling:** `reportName` is first converted to `reportNameConvert` using `decodeURIComponent` and `trim()`, and then passed to `getColumnsByCategory`.
        *   **Extensive `ignore` list for `selectedColumns`:** A very long list of columns is added to the `ignore` array in `getColumnsByCategory` for the `TotalShipmentAirWise` type, specifically excluding many ocean freight-related columns.
        *   **New `TotalKgsByLaneAirWise` Report (1/22/2026, 12:14:27 PM onwards):**
            *   Introduces a query to calculate total kilograms (kgs) by lane (POL-POD) from `mtr_air_data`.
            *   It defines a `base` CTE to standardize port names (`COALESCE(air.port_of_load_name, air.live_origin_name)`) and gross weight.
            *   The `t` CTE then sums `kgs` grouped by `pol || '-' || pod`.
            *   A `max_kgs` CTE finds the maximum total kgs, and the final select calculates the percentage for each lane.
            *   Similar extensive `ignore` list for `selectedColumns` with specific `must` columns for kgs and lane data.
        *   **New `TotalCbmByLaneAirWise` Report (1/22/2026, 2:06:13 PM onwards):**
            *   Adds logic for a "Total CBM By Lane Air Wise" report, mirroring the structure of `TotalKgsByLaneAirWise` but using `tot_cbm` column and calculating sum of CBM.
            *   Corrects the `GROUP BY` clause for `TotalCbmByLaneAirWise` to use `pol, pod` and the entity format `pol || '-' || pod`.

*   **`c:\Users\ridap\OneDrive\Documents\T360-V2\t360-backend-v2\src\utils\analytics.ts`** (Multiple timestamps: 1/21/2026, 3:21:18 PM to 1/22/2026, 2:17:46 PM):
    *   This utility file provides helper functions for analytics.
    *   `defaultDateRange`: Generates a default date range (current date - 365 days).
    *   `replaceValueInQuery`: Utility to replace specific port names (e.g., 'LONG BEACH' to 'LOS ANGELES') in query columns.
    *   `getUserObject`: Retrieves user and company information, with special logic for ADMIN access to fetch `usercode` from `mtr_user_master`.
    *   `getFilterQueryByDisplayValue`: Generates SQL `GROUP BY`, `ORDER BY`, `dateTrunc`, and `SELECT` clauses based on `displayBy` values ("month", "week", "quarter").
    *   `getExcelSelectedColumns`: Dynamically selects columns for Excel exports based on the `reportName` and whether it's a booking-related report.
    *   `dateFilterOnExport`: Filters and formats date values in data for export, setting invalid dates to `null` and formatting valid dates.
    *   `EXCEL_EXPORT_COLUMNS`: An array defining column keys and names for Excel exports, which is quite comprehensive for shipment data.
    *   **Timestamp 1/21/2026, 3:21:18 PM to 1/22/2026, 2:17:46 PM:** The content remains largely stable, indicating these are foundational utilities.

*   **`c:\Users\ridap\OneDrive\Documents\T360-V2\t360-backend-v2\src\common\util\export.query.ts`** (Multiple timestamps: 1/21/2026, 3:26:28 PM to 1/22/2026, 1:16:01 PM):
    *   This file contains a large `bookingQuery` function that returns specific SQL query fragments based on the `reportName`.
    *   `getMonthValue`: A helper function to map month names (e.g., "Jan") or numerical month values to their corresponding integer representation.
    *   The `bookingQuery` object contains predefined SQL string templates for various booking-related reports (e.g., "Booking Date to Actual Departure", "Booking Date to POD Arrival (Stacked Bar)").
    *   These queries incorporate dynamic filtering based on `CompanyName`, `stackedMonth`, `startWeek`, `endWeek`, `quarter`, `stackedGroup`, `stackedExport`, and `displayBy`.
    *   The queries often join `mtr_tracking_data` with `agent_booking_entry` on `mblno`.
    *   Date validation (`!= '0001-01-01 00:00:00 BC'`) is consistently applied in `WHERE` clauses.
    *   Console logs (`console.log(CompanyName, "companyname in booking query");`) are present for debugging.
    *   The content remains largely unchanged across the various timestamps in the log, suggesting this file was committed multiple times without major functional modifications during this period, possibly due to changes in other related files triggering new commits.

**Patterns and Recurring Elements:**

*   **Analytics Focus:** The majority of changes are within the `analytics` service and utility folders, indicating a strong development push in this area.
*   **Database Interaction:** Frequent use of `@src/common/util/database` for executing SQL queries.
*   **Company-Specific Filtering:** Almost all queries include a `LOWER(account_name) IN (${companyList})` condition, implying that analytics data is filtered based on the user's associated company.
*   **Date Range Filtering:** `fromDate` and `toDate` are consistently used to filter data within a specific time window. `defaultDateRange` utility is used for fallback dates.
*   **Report Type-Driven Logic:** The `type` parameter plays a crucial role in branching logic to select the appropriate query and customize display settings.
*   **Customizer Object:** A `customizer` object is frequently passed and modified to configure various aspects of the report, such as `dateRange`, `calType`, `dateColumns`, `booking`, `mblwise`, `chartType`, and `selectedColumns`.
*   **Column Selection and Ignoring:** The `getColumnsByCategory` utility is widely used to dynamically define which columns should be selected for a report, often with extensive `ignore` lists for fields not relevant to a specific report type and `must` lists for essential fields. This suggests a flexible column management system.
*   **Percentage Calculation:** Many reports calculate a `percentage` value based on a `value` and a `max_total`, typically rounded to two decimal places.
*   **Debugging Logs:** Numerous `console.log` and `logger.info` statements are present, indicating active debugging during development.
*   **SQL Query Structure:** Common SQL patterns include:
    *   `WITH t AS (...)`, `WITH base AS (...)` for Common Table Expressions (CTEs).
    *   `COUNT(DISTINCT ...)` for unique counts.
    *   `SUM(...)` for aggregation.
    *   `EXTRACT(DAY FROM ...)` for date differences.
    *   `ROUND((value / max_total) * 100)::numeric, 2)` for percentage calculation.
    *   `WHERE IS NOT NULL AND != '0001-01-01 00:00:00 BC'` for robust date validation in queries.
*   **Error Handling:** All endpoints and query builders include `try...catch` blocks to log errors and return a 500 "Internal Server Error" response.
*   **MBL-Wise and Stacked Bar Reports:** Several report types have `MblWise` and `StackedBar` variations, suggesting different granularities and visualization types for the same core metric.
*   **Data Transformation:** `decodeURIComponent(reportName || '').trim()` is a recurring pattern for sanitizing URL parameters.
*   **Air Cargo Expansion:** A clear pattern is the continuous integration of air cargo specific analytics, starting with basic shipment counts and expanding to kgs and cbm by lane. Initially, some chassis-related queries were found in `air.query.ts` but the file then dedicated itself to air cargo queries.

## 3:40:25 PM
The code changes primarily revolve around the analytics section of the T360-frontend-v2 application, with a notable focus on dashboard view management and the introduction of a new "AIR Wise" functionality.

**File-specific Updates:**

*   **`src\store\fretures\analytics-slice.ts`**:
    *   **1/20/2026, 1:56:23 PM**: The initial state for `selectedDashobard` was set to `"_Default_"`. The `setDashboard` reducer included logic to handle `"_Default_"` for both selection and insertion of dashboards.
    *   **1/20/2026, 1:57:02 PM**: The `selectedDashobard` initial state was changed to `"Default"`, but the `setDashboard` reducer's logic for inserting dashboards still referred to `"_Default_"`, creating an inconsistency.
    *   **1/20/2026, 6:35:22 PM**: The `setDashboard` reducer was updated to set `state.selectedDashobard` to `"Default"` (instead of `"_Default_"`) when `value.includes("_Default_")` for `type === "insert"`, attempting to resolve the inconsistency.
    *   **1/20/2026, 6:36:16 PM, 6:36:30 PM, 6:37:08 PM**: These entries show minor changes or re-saves, with the `setDashboard` reducer's `insert` logic reverting `state.selectedDashobard` back to `"_Default_"` in some specific conditions, reintroducing a minor inconsistency between UI display and internal state handling of default dashboards.
    *   **1/20/2026, 6:39:02 PM**: The `setDashboard` reducer was consistently updated to use `"Default"` instead of `"_Default_"` across the dashboard insertion logic, aligning the naming for the default dashboard.

*   **`src\components\screen\analytics\AnalyticsToolbar.tsx`**:
    *   **1/20/2026, 1:50:39 PM**: This file, responsible for the analytics toolbar, remained largely stable, handling dashboard selection, date filters, and PDF export functionality. It dispatches actions to the `analytics-slice`.
    *   **1/20/2026, 6:38:07 PM**: Minor adjustments were made to how dashboard names are displayed in the `ChipsTabView` to show "Default" instead of `"_Default_"`. The "Manage View" tooltip logic also started reflecting this shift.
    *   **1/20/2026, 6:38:27 PM**: Further refinement in the display logic for the `ChipsTabView` to consistently map `"_Default_"` to "Default" for display purposes. The tooltip condition `toolState?.selectedDashobard !== "Default" && toolState?.selectedDashobard !== "Default"` appears to have a redundant check.
    *   **1/21/2026, 1:19:45 PM**: A debugging `console.log(showDrawer,"setShowDrawer");` was added.

*   **`src\components\screen\analytics\custom-view\ViewContainer.tsx`**:
    *   **1/20/2026, 1:49:22 PM**: The component manages custom views, supporting "Container Wise" and "MBL Wise" tabs. It includes functionality for saving, deleting, and auditing views, as well as managing metric selections.
    *   **1/20/2026, 12:55:46 PM (on 1/21/2026)**: Initiated the process of adding an "AIR Wise" view type. The `selectedTab` state was updated to include `"airWise"` as a possible value. However, the UI's `RadioNav` options (`tabData`) and the `initializeCheckedMetrics` logic did not yet reflect this new option.
    *   **1/21/2026, 12:57:42 PM**: Conditional rendering for `selectedTab === "airWise"` was added in the `Dynamic TreeView` section, preparing the UI to display "AIR Wise" metrics, but it was still not selectable via `RadioNav`.
    *   **1/21/2026, 12:58:45 PM**: A debugging `console.log(viewOptions,"viewOptions")` was added.
    *   **1/21/2026, 1:18:10 PM**: The `initializeCheckedMetrics` function was updated to iterate over `["containerWise", "mblWise", "airWise"]`, ensuring that "AIR Wise" metrics are correctly initialized when editing a view. The `onChange` handler for `RadioNav` was also updated to cast to `"airWise"`, but the actual `tabData` options were still missing "AIR Wise".
    *   **1/21/2026, 1:21:49 PM**: The `tabData` array was finally updated to include `{ label: "AIR Wise", value: "airWise" }`, making the "AIR Wise" tab fully selectable in the UI.

*   **`src\data\options\global.ts`**:
    *   **1/20/2026, 6:41:28 PM**: A new constant `AIR_SHIPMENT_STATUS` was added, defining various statuses for air shipments (e.g., "New", "In Progress", "Booked", "EnRoute", "Landed", "Delivered", "Untracked"), indicating the expansion of tracking capabilities to air freight.

*   **`src\config\analytics.ts`**:
    *   **1/21/2026, 2:31:38 PM**, **1/22/2026, 12:21:27 PM**, **1/22/2026, 2:03:45 PM**, **1/22/2026, 2:09:42 PM**: Multiple entries for this file show minor modifications or re-saves without significant functional code changes. This file defines default analytics endpoints, columns for Excel export, and headers for analytics reports.

**Timestamps of Significant Changes:**

*   **1/20/2026, 1:56:23 PM - 6:39:02 PM**: A period of active development and refinement in the `analytics-slice.ts` and `AnalyticsToolbar.tsx` files, focusing on consistency in dashboard naming (`"_Default_"` vs "Default") and associated UI logic.
*   **1/20/2026, 6:41:28 PM**: Introduction of `AIR_SHIPMENT_STATUS` in `global.ts`, signaling the start of air freight related features.
*   **1/21/2026, 12:55:46 PM - 1:21:49 PM**: A concentrated series of changes in `ViewContainer.tsx` that gradually implemented and fully integrated the "AIR Wise" custom view option, making it selectable and functional.

**Patterns or Recurring Elements:**

*   **Dashboard Naming Consistency**: Repeated modifications in `analytics-slice.ts` and `AnalyticsToolbar.tsx` indicate an effort to standardize the naming of the default dashboard from `"_Default_"` to "Default" across the application's state and UI.
*   **Incremental Feature Rollout**: The "AIR Wise" feature was introduced incrementally in `ViewContainer.tsx`. First, the state type was updated, then the rendering logic, the initialization logic, and finally the UI selection option, spread across multiple commits over a short period.
*   **Debugging Statements**: Frequent addition of `console.log` statements suggests ongoing debugging during development, particularly in `ViewContainer.tsx` and `AnalyticsToolbar.tsx`.
*   **Refactoring/Minor Saves**: Several files (`analytics-slice.ts`, `analytics.ts`) show multiple timestamps with identical or near-identical content, indicating frequent saves, possibly without substantial functional changes, or minor formatting adjustments.